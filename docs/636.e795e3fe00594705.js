"use strict";(self.webpackChunkvirtual_trust=self.webpackChunkvirtual_trust||[]).push([[636],{9636:(z,g,r)=>{r.r(g),r.d(g,{PatientModule:()=>I});var f=r(6895),v=r(9549),h=r(7392),b=r(4144),m=r(1581),x=r(1572),C=r(1948),d=r(6308),s=r(7155),p=r(6438),t=r(4650),T=r(5861),P=r(5017),Z=r(590),u=r(8e3),_=r(9988);function w(e,i){1&e&&t._UZ(0,"mat-spinner")}function S(e,i){if(1&e&&(t.TgZ(0,"div",26),t.YNc(1,w,1,0,"mat-spinner",27),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isLoadingResults)}}function M(e,i){1&e&&t._UZ(0,"th",28)}function N(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",29)(1,"mat-radio-button",30),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(){const c=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onSelectPatient(c))}),t.qZA()()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("checked",o.selection.isSelected(n))("aria-label",o.radioLabel(n))}}function O(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1," Name "),t.qZA())}function D(e,i){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function A(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1," Gender "),t.qZA())}function U(e,i){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.gender," ")}}function Y(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1," Age "),t.qZA())}function L(e,i){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.age," ")}}function k(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1," (DOB) "),t.qZA())}function Q(e,i){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.dob," ")}}function R(e,i){1&e&&t._UZ(0,"tr",32)}function J(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const c=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onSelectPatient(c))}),t.qZA()}}function F(e,i){1&e&&(t.TgZ(0,"tr",34)(1,"td",35),t._uU(2,"No data matching the filter"),t.qZA()())}const B=function(){return[5,10,20]},j=[{path:"",canActivate:[()=>{const e=(0,t.f3M)(p.F0),i=localStorage.getItem("vt-demo-isMultiTenantUser");return"0"===i||"1"===i||e.parseUrl("/access-denied")}],component:(()=>{class e{constructor(n,o,a){this.patientService=n,this.router=o,this.logoutService=a,this.displayedColumns=["select","name","gender","age","dob"],this.dataSource=new s.by([]),this.selection=new P.Ov(!0,[]),this.patientEntryList=[],this.isLoadingResults=!0}ngOnInit(){this.getPatientList(),this.sessionStorageData=(0,u.j5)()}getPatientList(){var o,n=this;this.patientService.getPatientList().pipe((0,Z.P)()).subscribe({next:(o=(0,T.Z)(function*(a){a.entry&&(n.patientEntryList=a.entry,n.getDataForTable(n.patientEntryList),n.isLoadingResults=!1)}),function(c){return o.apply(this,arguments)}),error:o=>{this.isLoadingResults=!1,console.log(o)}})}getDataForTable(n){const o=[];n.map((a,c)=>{const l={name:(0,u.rQ)(a.resource),gender:a.resource.gender,age:(0,u.Fw)(a.resource.birthDate),dob:a.resource.birthDate,position:c+1,patientId:a.resource.id};o.push(l)}),this.dataSource=new s.by(o),this.selection=new P.Ov(!0,[]),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}radioLabel(n){return`${this.selection.isSelected(n)?"deselect":"select"} row ${n.position+1}`}onSelectPatient(n){this.selection.toggle(n);const o=this.patientEntryList.find(a=>a.resource.id===n.patientId);o&&this.router.navigateByUrl("/dashboard",{state:{patient:o}}).then(()=>{sessionStorage.setItem("patient",JSON.stringify(o)),localStorage.setItem("vt-demo-previousVisitedUrl","/dashboard")})}logout(){const n=this.sessionStorageData.businessAndProcessDetails?.businessKey;n&&this.logoutService.logoutUser({businessKey:n})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(_.e6),t.Y36(p.F0),t.Y36(_.PO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-patient"]],viewQuery:function(n,o){if(1&n&&(t.Gf(m.NW,5),t.Gf(d.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first),t.iGM(a=t.CRH())&&(o.sort=a.first)}},decls:34,vars:6,consts:[[1,"container"],["class","example-loading-shade",4,"ngIf"],[1,"row","align-items-center","table-title-wrap"],[1,"col-12","col-md-4","text-center","text-md-start"],[1,"table-title"],[1,"col-12","col-md-8","text-center","text-md-end"],[1,"d-flex","justify-content-center","justify-content-md-end","align-items-center"],[1,"table-search-wrap","me-3"],["type","text","id","datatable1","placeholder","Search...",1,"table-search",3,"keyup"],["aria-hidden","false","aria-label","logout","fontIcon","logout",3,"click"],[1,"row","mat-elevation-z8"],[1,"col-md-12","p-0"],[1,"table-responsive"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","gender"],["matColumnDef","age"],["matColumnDef","dob"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of patient",3,"pageSizeOptions"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["color","primary",3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","5",1,"text-center"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.YNc(1,S,2,1,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Select Patient"),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"input",8),t.NdJ("keyup",function(c){return o.applyFilter(c)}),t.qZA()(),t.TgZ(10,"mat-icon",9),t.NdJ("click",function(){return o.logout()}),t.qZA()()()(),t.TgZ(11,"div",10)(12,"div",11)(13,"div",12)(14,"table",13),t.ynx(15,14),t.YNc(16,M,1,0,"th",15),t.YNc(17,N,2,2,"td",16),t.BQk(),t.ynx(18,17),t.YNc(19,O,2,0,"th",18),t.YNc(20,D,2,1,"td",16),t.BQk(),t.ynx(21,19),t.YNc(22,A,2,0,"th",18),t.YNc(23,U,2,1,"td",16),t.BQk(),t.ynx(24,20),t.YNc(25,Y,2,0,"th",18),t.YNc(26,L,2,1,"td",16),t.BQk(),t.ynx(27,21),t.YNc(28,k,2,0,"th",18),t.YNc(29,Q,2,1,"td",16),t.BQk(),t.YNc(30,R,1,0,"tr",22),t.YNc(31,J,1,0,"tr",23),t.YNc(32,F,3,0,"tr",24),t.qZA()(),t._UZ(33,"mat-paginator",25),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("ngIf",o.isLoadingResults),t.xp6(13),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(5,B)))},dependencies:[f.O5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,m.NW,d.YE,d.nU,x.Ou,h.Hw,C.U0],styles:[".container[_ngcontent-%COMP%]{padding:100px 15px!important;max-width:1260px;margin:auto}.table[_ngcontent-%COMP%]{width:100%}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}.mat-column-select[_ngcontent-%COMP%]{width:32px;padding-right:24px!important;text-align:center!important}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}mat-icon[_ngcontent-%COMP%]{cursor:pointer}.table-title-wrap[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px 5px 0 0;padding:10px;border-bottom:1px solid #f4f4f4}.table-title-wrap[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]{font-size:20px;font-weight:800;line-height:1.4;color:#212121}.table-title-wrap[_ngcontent-%COMP%]   .table-search-wrap[_ngcontent-%COMP%]   .table-search[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#97a1af;line-height:1;border:1px solid #E0E0E0;border-radius:5px;padding:13px 44px 13px 20px;background-image:url(search-icon.d5ec07e40019ccd6.png);background-color:#fff;background-repeat:no-repeat;background-position:90% 50%;max-width:230px;width:100%;outline:none}.table-title-wrap[_ngcontent-%COMP%]   .table-search-wrap[_ngcontent-%COMP%]   .table-search[_ngcontent-%COMP%]:focus{border-color:#0097d0;box-shadow:0 2px 6px #00000029}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(j),p.Bz]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,s.p0,m.TU,d.JX,v.lN,b.c,x.Cq,h.Ps,C.Fk,E]}),e})()}}]);