"use strict";(self.webpackChunkvirtual_trust=self.webpackChunkvirtual_trust||[]).push([[535],{4535:(ie,f,d)=>{d.r(f),d.d(f,{TenantUsersModule:()=>de});var v=d(6895),e=d(4650),h=(d(4006),d(3238));d(1281);let T=(()=>{class o{}return o.\u0275fac=function(c){return new(c||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})(),q=(()=>{class o{}return o.\u0275fac=function(c){return new(c||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.BQ,h.si,T,h.BQ,T]}),o})();var J=d(9549),j=d(4144),_=d(1581),F=d(1572),k=d(6308),i=d(7155),u=d(6438),M=d(5017),A=d(590),p=d(8e3),Y=d(4636),g=d(9988),I=d(7392),U=d(1948);function Q(o,a){1&o&&e._UZ(0,"mat-spinner")}function G(o,a){if(1&o&&(e.TgZ(0,"div",24),e.YNc(1,Q,1,0,"mat-spinner",25),e.qZA()),2&o){const c=e.oxw();e.xp6(1),e.Q6J("ngIf",c.isLoadingResults)}}function V(o,a){1&o&&e._UZ(0,"th",26)}function X(o,a){if(1&o){const c=e.EpF();e.TgZ(0,"td",27)(1,"mat-radio-button",28),e.NdJ("click",function(n){return n.stopPropagation()})("change",function(){const r=e.CHM(c).$implicit,m=e.oxw();return e.KtG(m.onSelectPractitioner(r))}),e.qZA()()}if(2&o){const c=a.$implicit,t=e.oxw();e.xp6(1),e.Q6J("checked",t.selection.isSelected(c))("aria-label",t.radioLabel(c))}}function $(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1," Facility Id "),e.qZA())}function K(o,a){if(1&o&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&o){const c=a.$implicit;e.xp6(1),e.hij(" ",c.tenantId," ")}}function W(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1," Facility Name "),e.qZA())}function ee(o,a){if(1&o&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&o){const c=a.$implicit;e.xp6(1),e.hij(" ",c.tenantName," ")}}function ce(o,a){1&o&&e._UZ(0,"tr",30)}function te(o,a){if(1&o){const c=e.EpF();e.TgZ(0,"tr",31),e.NdJ("click",function(){const r=e.CHM(c).$implicit,m=e.oxw();return e.KtG(m.onSelectPractitioner(r))}),e.qZA()}}function oe(o,a){1&o&&(e.TgZ(0,"tr",32)(1,"td",33),e._uU(2,"No data matching the filter"),e.qZA()())}const ne=function(){return[5,10,20]},ae=[{path:"",canActivate:[()=>{const o=(0,e.f3M)(u.F0),a=localStorage.getItem("vt-demo-isMultiTenantUser");return!(!a||"1"!==a)||o.parseUrl("/access-denied")}],component:(()=>{class o{constructor(c,t,n,r){this.menuService=c,this.userService=t,this.router=n,this.logoutService=r,this.displayedColumns=["select","facilityId","facilityName"],this.dataSource=new i.by([]),this.selection=new M.Ov(!0,[]),this.isLoadingResults=!0,this.sessionStorageData=(0,p.j5)()}ngOnInit(){const c=this.getTenantUserJsonObj();c?(this.getDataForTable(c.data),this.isLoadingResults=!1):this.isLoadingResults=!1}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getTenantUserJsonObj(){return this.sessionStorageData.tenantUserList||null}getDataForTable(c){const t=[];c.map((n,r)=>{t.push({tenantId:n.tenantId,tenantName:n.tenantName,position:r+1})}),this.dataSource=new i.by(t),this.selection=new M.Ov(!0,[])}applyFilter(c){this.dataSource.filter=c.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}radioLabel(c){return`${this.selection.isSelected(c)?"deselect":"select"} row ${c.position+1}`}onSelectPractitioner(c){this.selection.toggle(c);const t=this.getTenantUserJsonObj(),n=t&&t.data.find(r=>r.tenantId===c.tenantId);sessionStorage.setItem("tenantUserLoginInfo",JSON.stringify(n)),this.sessionStorageData=(0,p.j5)(),this.getUserMenuAccessFromFHIrService(),n&&this.afterTenantSelect(n,t?.status)}getUserMenuAccessFromFHIrService(){const c=this.sessionStorageData.tenantUserLoginInfo?.tenantId,t=this.sessionStorageData.tenantUserLoginInfo?.id,n=this.sessionStorageData.businessAndProcessDetails?.businessKey,r=this.sessionStorageData.businessAndProcessDetails?.processId,m=this.sessionStorageData.businessAndProcessDetails?.processDefinitionId;c&&t&&n&&r&&m&&(this.menuService.getUserMenuAccessFromFHIrService({tenantId:c,userId:t,businessKey:n,processId:r,processDefinitionId:m}).pipe((0,A.P)()).subscribe({next:s=>{sessionStorage.setItem("userAllMenuAccessResponse2",JSON.stringify(s.userAllMenuAccessResponse2))},error:s=>{console.log(s)}}),this.userService.getFHIrUrlByTenant({tenantId:c}).pipe((0,A.P)()).subscribe({next:s=>{s[0].isActive&&s[0].serverURL&&(Y.N.fHirUrl=s[0].serverURL)},error:s=>{console.log(s)}}))}afterTenantSelect(c,t){t&&"Practitioner"===c.userType&&this.router.navigate(["/patients"]).then(()=>{localStorage.setItem("vt-demo-previousVisitedUrl","/patients"),(0,p.$z)(c.themeId)})}logout(){const c=this.sessionStorageData.businessAndProcessDetails?.businessKey;c&&this.logoutService.logoutUser({businessKey:c})}}return o.\u0275fac=function(c){return new(c||o)(e.Y36(g.hl),e.Y36(g.KD),e.Y36(u.F0),e.Y36(g.PO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tenant-users"]],viewQuery:function(c,t){if(1&c&&(e.Gf(_.NW,5),e.Gf(k.YE,5)),2&c){let n;e.iGM(n=e.CRH())&&(t.paginator=n.first),e.iGM(n=e.CRH())&&(t.sort=n.first)}},decls:28,vars:6,consts:[[1,"container"],["class","example-loading-shade",4,"ngIf"],[1,"row","align-items-center","table-title-wrap"],[1,"col-12","col-md-4","text-center","text-md-start"],[1,"table-title"],[1,"col-12","col-md-8","text-center","text-md-end"],[1,"d-flex","justify-content-center","justify-content-md-end","align-items-center"],[1,"table-search-wrap","me-3"],["type","text","id","datatable1","placeholder","Search...",1,"table-search",3,"keyup"],["aria-hidden","false","aria-label","logout","fontIcon","logout",3,"click"],[1,"row","mat-elevation-z8"],[1,"col-md-12","p-0"],[1,"table-responsive"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","facilityId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","facilityName"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of tenant users",3,"pageSizeOptions"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["color","primary",3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row","",3,"click"],[1,"mat-row"],["colspan","3",1,"text-center"]],template:function(c,t){1&c&&(e.TgZ(0,"div",0),e.YNc(1,G,2,1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5,"Select Facility"),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"input",8),e.NdJ("keyup",function(r){return t.applyFilter(r)}),e.qZA()(),e.TgZ(10,"mat-icon",9),e.NdJ("click",function(){return t.logout()}),e.qZA()()()(),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12)(14,"table",13),e.ynx(15,14),e.YNc(16,V,1,0,"th",15),e.YNc(17,X,2,2,"td",16),e.BQk(),e.ynx(18,17),e.YNc(19,$,2,0,"th",18),e.YNc(20,K,2,1,"td",16),e.BQk(),e.ynx(21,19),e.YNc(22,W,2,0,"th",18),e.YNc(23,ee,2,1,"td",16),e.BQk(),e.YNc(24,ce,1,0,"tr",20),e.YNc(25,te,1,0,"tr",21),e.YNc(26,oe,3,0,"tr",22),e.qZA()(),e._UZ(27,"mat-paginator",23),e.qZA()()()),2&c&&(e.xp6(1),e.Q6J("ngIf",t.isLoadingResults),e.xp6(13),e.Q6J("dataSource",t.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(5,ne)))},dependencies:[v.O5,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,i.Ee,_.NW,k.YE,k.nU,F.Ou,I.Hw,U.U0],styles:[".container[_ngcontent-%COMP%]{padding:100px 15px!important;max-width:1260px;margin:auto}.table[_ngcontent-%COMP%]{width:100%}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}.mat-column-select[_ngcontent-%COMP%]{width:32px;padding-right:24px!important;text-align:center!important}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}mat-icon[_ngcontent-%COMP%]{cursor:pointer}.table-title-wrap[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px 5px 0 0;padding:10px;border-bottom:1px solid #f4f4f4}.table-title-wrap[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]{font-size:20px;font-weight:800;line-height:1.4;color:#212121}.table-title-wrap[_ngcontent-%COMP%]   .table-search-wrap[_ngcontent-%COMP%]   .table-search[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#97a1af;line-height:1;border:1px solid #E0E0E0;border-radius:5px;padding:13px 44px 13px 20px;background-image:url(search-icon.d5ec07e40019ccd6.png);background-color:#fff;background-repeat:no-repeat;background-position:90% 50%;max-width:230px;width:100%;outline:none}.table-title-wrap[_ngcontent-%COMP%]   .table-search-wrap[_ngcontent-%COMP%]   .table-search[_ngcontent-%COMP%]:focus{border-color:#0097d0;box-shadow:0 2px 6px #00000029}"]}),o})()}];let re=(()=>{class o{}return o.\u0275fac=function(c){return new(c||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(ae),u.Bz]}),o})(),de=(()=>{class o{}return o.\u0275fac=function(c){return new(c||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.ez,i.p0,_.TU,k.JX,J.lN,j.c,q,F.Cq,I.Ps,U.Fk,re]}),o})()}}]);