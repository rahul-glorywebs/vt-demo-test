(self.webpackChunkvirtual_trust=self.webpackChunkvirtual_trust||[]).push([[7],{9988:(b,c,t)=>{"use strict";t.d(c,{e8:()=>d,EO:()=>s,DN:()=>w,sp:()=>B,gp:()=>W,PO:()=>y,hl:()=>C,oE:()=>x,e6:()=>S,o:()=>k,KD:()=>O});var n=t(4004),o=t(4636),r=t(4650),i=t(529);let d=(()=>{class a{constructor(e){this.http=e}login(e){return this.http.put(`${o.N.camundaApiUrl}/login_vt`,e).pipe((0,n.U)(f=>f))}logOut(e){return this.http.put(`${o.N.camundaApiUrl}/logout_vt`,e).pipe((0,n.U)(f=>f))}changePassword(e){return this.http.put(`${o.N.camundaApiUrl}/updateMyPassword`,e).pipe((0,n.U)(f=>f))}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(i.eN))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var E=t(5698),P=t(5412),T=t(4859);let I=(()=>{class a{constructor(e,f){this.data=e,this.mdDialogRef=f}ngOnInit(){}cancel(){this.close(!1)}close(e){this.mdDialogRef.close(e)}confirm(){this.close(!0)}}return a.\u0275fac=function(e){return new(e||a)(r.Y36(P.WI),r.Y36(P.so))},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-confirm-dialog"]],decls:8,vars:3,consts:[["align","end"],["mat-button","","matDialogClose","cancel",1,"button",3,"click"],["mat-button","","matDialogClose","confirm",1,"button",3,"click"]],template:function(e,f){1&e&&(r.TgZ(0,"mat-dialog-content")(1,"p"),r._uU(2),r.qZA()(),r.TgZ(3,"mat-dialog-actions",0)(4,"button",1),r.NdJ("click",function(){return f.cancel()}),r._uU(5),r.qZA(),r.TgZ(6,"button",2),r.NdJ("click",function(){return f.confirm()}),r._uU(7),r.qZA()()),2&e&&(r.xp6(2),r.Oqu(f.data.bodyText),r.xp6(3),r.Oqu(f.data.cancelButtonText),r.xp6(2),r.Oqu(f.data.confirmButtonText))},dependencies:[T.lW,P.ZT,P.xY,P.H8],styles:[".button[_ngcontent-%COMP%]{color:#fff!important;background-color:var(--theme-left-side)}"]}),a})(),w=(()=>{class a{constructor(e){this.dialog=e}open(e){this.dialogRef=this.dialog.open(I,{data:{title:e.title,bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,confirmButtonText:e.confirmButtonText}})}confirmed(){return this.dialogRef.afterClosed().pipe((0,E.q)(1),(0,n.U)(e=>e))}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(P.uw))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var j=t(1135);let B=(()=>{class a{constructor(e){this.http=e,this.WorkFlowMenuDataBehaviorSubject=new j.X(null),this.smartAppSubmenuBehaviorSubject=new j.X(null),this.renderDashPayloadBehaviorSubject=new j.X(null)}consent(e){return this.http.get(`${o.N.fHirUrl}/Consent/${e}`).pipe((0,n.U)(f=>f))}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(i.eN))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var R=t(8e3),p=t(6438),A=t(7009);let k=(()=>{class a{constructor(e){this.snackBar=e}openSnackBar(e,f,v){this.snackBar.open(e,f,{duration:2e3,horizontalPosition:"right",verticalPosition:"top",panelClass:v})}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(A.ux))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),y=(()=>{class a{constructor(e,f,v){this.router=e,this.authService=f,this.snackbarService=v}logoutUser(e){this.authService.logOut(e).subscribe({next:f=>{f&&(sessionStorage.clear(),Object.keys(localStorage).forEach(m=>{m.includes("vt-demo")&&localStorage.removeItem(m)}),this.router.navigate(["/auth"]).then(()=>{(0,R.$z)(1),this.snackbarService.openSnackBar(f.message,"Close","success-snackbar")}))},error:f=>{console.log(f),this.snackbarService.openSnackBar(f.error.errorMessage,"Close","error-snackbar"),this.router.navigate(["/auth"]).then(()=>{(0,R.$z)(1),sessionStorage.clear(),Object.keys(localStorage).forEach(m=>{m.includes("vt-demo")&&localStorage.removeItem(m)})})}})}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(p.F0),r.LFG(d),r.LFG(k))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),C=(()=>{class a{constructor(e){this.http=e}getTenantQuestionnaire(e){return this.http.post(`${o.N.serverUrl}/getTenantQuestionnaire`,e).pipe((0,n.U)(f=>f))}getUserWiseMenuWiseAccessDetails(e){return this.http.post(`${o.N.serverUrl}/userWiseMenuWiseAccessDetails`,e).pipe((0,n.U)(f=>f))}showFrameForm(e){return this.http.get(`${o.N.serverUrl}/reports/${e}`).pipe((0,n.U)(f=>f))}getUserMenuAccessFromFHIrService(e){return this.http.put(`${o.N.camundaApiUrl}/select_tenantByMenu`,e).pipe((0,n.U)(f=>f))}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(i.eN))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var l=t(590);let S=(()=>{class a{constructor(e){this.http=e}getPatientList(){return this.http.get(`${o.N.fHirUrl18008}/Patient/?_&_summary=true&_count=2000&_sort:asc=given`).pipe((0,n.U)(e=>e))}getAllQRByPatientId(e){return this.http.get(`${o.N.fHirUrl}/QuestionnaireResponse?subject=Patient/${e}&_include=QuestionnaireResponse%3Aquestionnaire&_sort=-_lastUpdated`).pipe((0,n.U)(f=>f))}getAllQuestionnaire(){return this.http.get(`${o.N.fHirUrl18008}/Questionnaire?_sort=title&status=active&_count=100`).pipe((0,n.U)(e=>e))}getEncountersByPatientId(e){return this.http.get(`${o.N.fHirUrl}/Encounter?_sort=-date&subject=Patient/${e}`).pipe((0,n.U)(f=>f))}getConsentsByPatientId(e){return this.http.get(`${o.N.fHirUrl}/Consent?patient=${e}`).pipe((0,n.U)(f=>f))}getObservationsByPatientId(e){return this.http.get(`${o.N.fHirUrl}/Observation?_sort=-date&subject=Patient/${e}`).pipe((0,n.U)(f=>f))}getQuestionnaireBySubmenuTypeApp(e,f){return this.http.get(`${o.N.fHirUrl}/Questionnaire/${e}/_history/${f}`).pipe((0,n.U)(v=>v))}getMedicationAdministrationByPatientId(e){return this.http.get(`${o.N.fHirUrl}/MedicationAdministration?subject=Patient/${e}`).pipe((0,n.U)(f=>f))}updateConsent(e,f){return this.http.put(`${o.N.fHirUrl}/Consent/${e}`,f).pipe((0,n.U)(v=>v))}saveConsent(e){return this.http.post(`${o.N.fHirUrl}/Consent`,e).pipe((0,n.U)(f=>f))}getPatientById(e){return this.http.get(`${o.N.fHirUrl}/Patient/${e}`).pipe((0,n.U)(f=>f))}getMedicationRequestByPatientId(e){return this.http.get(`${o.N.fHirUrl}/MedicationRequest?subject=Patient/${e}`).pipe((0,n.U)(f=>f))}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(i.eN))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var _=t(9562);let x=(()=>{class a{constructor(e,f){this.patientService=e,this.practitionerService=f,this.questionnaireResponseSubject=new j.X(null),this.consentsByPatientSubject=new j.X(null)}getAllQuestionnaireResponseByPatientId(e){this.patientService.getAllQRByPatientId(e.resource.id).subscribe({next:v=>{let m=[],U=[];v&&"Bundle"==v.resourceType&&"searchset"==v.type&&v.entry?(v.entry.map($=>{var L=$.resource;if("QuestionnaireResponse"===L.resourceType){var h;L.meta&&L.meta.lastUpdated?h=new Date(L.meta.lastUpdated).toString():L.authored&&(h=new Date(L.authored).toString());var M=null,z=null,G=L.questionnaire&&L.reference?L.questionnaire.reference:L.questionnaire;if(G){var Q=G.slice(14);M=(0,R.oo)(v,Q)}if(M){z=(0,R.Qg)(M);var K=new RegExp("http://hl7.org/fhir/u./sdc/StructureDefinition/sdc-questionnaire\\|(\\d+.?\\d+)"),J=null;if(L.meta&&L.meta.profile)for(var Y=0,q=L.meta.profile.length;Y<q;Y++)L.meta.profile[Y].match(K)&&(J="SDC");m.push(M),U.push({resId:L.id,resName:z,updatedAt:h,resType:"QuestionnaireResponse",questionnaire:M,questionnaireresponse:L,extensionType:J,resTypeDisplay:J?"QuestionnaireResponse (SDC)":"QuestionnaireResponse"})}}}),U=(0,R.R0)(U,"resName"),this.questionnaireResponseSubject.next(U)):this.questionnaireResponseSubject.next(null)},error:v=>{console.log(v)}})}getConsentsByPatientId(e){const f=e.resource.id;let v;this.practitionerService.getAllPractitioner().pipe((0,l.P)()).subscribe({next:m=>{v=m,this.patientService.getConsentsByPatientId(f).subscribe({next:U=>{const $=[],L=[];let h=[];if(U&&"Bundle"==U.resourceType&&"searchset"==U.type&&U.entry){for(let M=0,z=U.entry.length;M<z;M++){$.push(U.entry[M]);const G={id:U.entry[M].resource.id,provisionType:U.entry[M].resource.provision.type,status:U.entry[M].resource.status,start:U.entry[M].resource.provision.period.start,end:U.entry[M].resource.provision.period.end,practitionerName:(0,R.B$)(U.entry[M].resource.provision.actor[0].reference.reference,v.entry)};L.push(G)}h=(0,R.R0)(L,"practitionerName"),this.consentsByPatientSubject.next(h)}else this.consentsByPatientSubject.next(h)},error:U=>{this.consentsByPatientSubject.next(null),console.log(U)}})},error:m=>{console.log(m)}})}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(S),r.LFG(_.v))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),O=(()=>{class a{constructor(e){this.http=e}getFHIrUrlByTenant(e){return this.http.post(`${o.N.serverUrl}/getAllFHIRDetailsByTenant`,e).pipe((0,n.U)(f=>f))}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(i.eN))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var F=t(5861),D=t(6724),N=t(1119),H=t(6895);let W=(()=>{class a{constructor(e,f,v){this.location=e,this.patientQuestionnaireService=f,this.snackbarService=v,this.state$=this.location.getState(),this.state$?this.patientObj=this.state$.patient:(this.sessionStorageData=(0,R.j5)(),this.patientObj=this.sessionStorageData.patient)}saveForm(e,f,v){var m=this;return(0,F.Z)(function*(){const U=document.getElementById(e),$=LForms.Util.getFormFHIRData("QuestionnaireResponse",N.kT,U,{extract:!0,subject:f}),L=$.shift(),M={id:v.id};yield m.createQQRObs(M,L,$,!0),document.getElementById("save-button").style.display="none",m.snackbarService.openSnackBar("Form data Saved","Close","success-snackbar"),m.patientObj&&m.patientQuestionnaireService.getAllQuestionnaireResponseByPatientId(m.patientObj)})()}createQQRObs(e,f,v,m){return(0,F.Z)(function*(){const U={resourceType:"Bundle",type:"transaction",entry:[]};function $(h){return L.apply(this,arguments)}function L(){return L=(0,F.Z)(function*(h){return function g(a,u){a.questionnaire="Questionnaire/"+u.id}(f,h),yield D.client(`${o.N.fHirUrl}`).request({url:"",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)})}),L.apply(this,arguments)}return U.entry.push({resource:f,request:{method:"POST",url:"QuestionnaireResponse"}}),v.forEach(h=>{U.entry.push({resource:h,request:{method:"POST",url:"Observation"}})}),m?yield $(e).then(h=>[h],h=>[h]):yield D.client(`${o.N.fHirUrl}`).create(e).then(M=>$(M).then(z=>[M,z],z=>[M,z]))})()}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(H.Ye),r.LFG(x),r.LFG(k))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),s=(()=>{class a{constructor(e){this.http=e}patientImmunizationCondition(e){return this.http.post("https://fhirtest2.intercorpvt.com:8888/cds-services/patient-select-VT",e).pipe((0,n.U)(f=>f))}}return a.\u0275fac=function(e){return new(e||a)(r.LFG(i.eN))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},9562:(b,c,t)=>{"use strict";t.d(c,{v:()=>d});var n=t(4004),o=t(4636),r=t(4650),i=t(529);let d=(()=>{class E{constructor(T){this.http=T}getAllPractitioner(){return this.http.get(`${o.N.fHirUrl}/Practitioner?_sort=given`).pipe((0,n.U)(T=>T))}}return E.\u0275fac=function(T){return new(T||E)(r.LFG(i.eN))},E.\u0275prov=r.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},8e3:(b,c,t)=>{"use strict";t.d(c,{$4:()=>j,$z:()=>P,Ag:()=>p,B$:()=>I,Fw:()=>w,Nj:()=>A,Qg:()=>d,R0:()=>T,ZK:()=>k,hQ:()=>B,j5:()=>o,oo:()=>i,qI:()=>R,rQ:()=>r});var n=t(1119);const o=()=>{const y={userAllAccessInfo:[],tenantUserLoginInfo:null,businessAndProcessDetails:null,patientUserId:null,tenantUserList:null,patient:null,userAllMenuAccessResponse2:null},C=sessionStorage.getItem("userAllAccessInfo");C&&(y.userAllAccessInfo=JSON.parse(C).menuAccess);const l=sessionStorage.getItem("tenantUserLoginInfo");l&&(y.tenantUserLoginInfo=JSON.parse(l));const S=sessionStorage.getItem("businessAndProcessDetails");S&&(y.businessAndProcessDetails=JSON.parse(S));const _=sessionStorage.getItem("patientUserId");_&&(y.patientUserId=_);const x=sessionStorage.getItem("tenantUserList");x&&(y.tenantUserList=JSON.parse(x));const O=sessionStorage.getItem("patient");O&&(y.patient=JSON.parse(O));const F=sessionStorage.getItem("userAllMenuAccessResponse2");return F&&(y.userAllMenuAccessResponse2=JSON.parse(F)),y},r=y=>{let C="";return y&&y.name&&y.name.length>0&&(y.name[0].given&&y.name[0].family?C=y.name[0].given[0]+" "+y.name[0].family:y.name[0].family?C=y.name[0].family:y.name[0].given&&(C=y.name[0].given[0])),C},i=(y,C)=>{var l=null;if(y)for(var S=0,_=y.entry.length;S<_;S++){var x=y.entry[S].resource;if("Questionnaire"===x.resourceType&&x.id===C){l=x;break}}return l},d=y=>{var C=y.title||y.name||y.code&&y.code.length&&y.code[0].display;if(y.code&&y.code.length){var l=y.code[0];"http://loinc.org"==l.system&&l.code&&(C||(C=""),C+=" ["+l.code+"]")}return C||(C="Untitled, #"+y.id),C},P=y=>{switch(y){case n.w0:document.documentElement.style.setProperty("--theme-left-side","#005999"),document.documentElement.style.setProperty("--theme-nav-link","#a3c8ff"),document.documentElement.style.setProperty("--theme-active-nav-link","#4c94ff");break;case n.f9:case n.u5:document.documentElement.style.setProperty("--theme-left-side","#424242"),document.documentElement.style.setProperty("--theme-nav-link","#a5a5a5"),document.documentElement.style.setProperty("--theme-active-nav-link","#747474");break;case n.uq:document.documentElement.style.setProperty("--theme-left-side","#3c8dad"),document.documentElement.style.setProperty("--theme-nav-link","#a3c8ff"),document.documentElement.style.setProperty("--theme-active-nav-link","#12617f");break;case n.rz:document.documentElement.style.setProperty("--theme-left-side","#285430"),document.documentElement.style.setProperty("--theme-nav-link","rgba(255,255,255,0.6);"),document.documentElement.style.setProperty("--theme-active-nav-link","#A4BE7B");break;default:document.documentElement.style.setProperty("--theme-left-side","#005999"),document.documentElement.style.setProperty("--theme-nav-link","#a3c8ff"),document.documentElement.style.setProperty("--theme-active-nav-link","#4c94ff")}},T=(y,C)=>y.sort(function(l,S){var _=l[C].toUpperCase(),x=S[C].toUpperCase();return _<x?-1:_>x?1:0}),I=(y,C)=>{const l=y.split("/").slice(1,2).join("/");let S="";return C.forEach(_=>{l==_.resource.id&&(S=`${_.resource.name[0].prefix[0]} ${_.resource.name[0].given[0]} ${_.resource.name[0].family}`)}),S},w=y=>{var C=Date.now()-new Date(y).getTime(),l=new Date(C);return Math.abs(l.getUTCFullYear()-1970),Math.abs(l.getUTCFullYear()-1970)},j=y=>{let C="";for(let l of y.resource.name)C=l.prefix[0]+" "+l.given[0]+" "+l.family;return C},B=(y,C,l,S,_,x)=>({resourceType:"Consent",id:"18108",meta:{versionId:"1",source:"#QFdWQYwnWEWz0KGQ"},status:"active",scope:{coding:[{system:"http://terminology.hl7.org/CodeSystem/consentscope",code:"patient-privacy"}]},patient:{reference:"Patient/"+y},dateTime:"2020-07-22T15:28:22Z",sourceAttachment:{title:"The terms of the consent in lawyer speak."},provision:{type:C.type,period:{start:l,end:S},actor:[{role:{coding:[{system:"http://terminology.hl7.org/CodeSystem/v3-ParticipationType",code:"PRCP"}]},reference:{reference:C.actor}}],action:[{coding:[{system:"http://terminology.hl7.org/CodeSystem/consentaction",code:"collect"}]}],code:{coding:_},data:x}}),R=y=>{const S=JSON.stringify(y).replace(/\n/g,"");return JSON.parse(S)},p=()=>{document.querySelector("wc-lhc-form").style.height="100%";const C=document.querySelector(".lhc-form");C.style.position="relative",C.style.overflow="hidden",C.style.height="100%";const l=document.querySelector(".lhc-form-title");l.style.display="flex",l.style.justifyContent="space-between",l.style.position="sticky",l.style.width="100%",l.style.marginBottom="10px",l.style.marginTop="0",l.style.backgroundColor="var(--theme-left-side)";const S=document.querySelector(".lhc-form-body");S.style.margin="0",S.style.padding="0",S.style.height="calc(100% - 51px)",S.style.overflowY="scroll",Array.from(document.getElementsByClassName("lhc-help-button")).forEach(O=>O.style.color="var(--theme-left-side)"),Array.from(document.getElementsByClassName("lhc-button")).forEach(O=>O.style.backgroundColor="var(--theme-left-side)")},A=()=>{const y=document.querySelector(".lhc-form-title"),C=document.createElement("img");return C.setAttribute("id","save-button"),C.setAttribute("src","assets/images/svg/save_icon.svg"),C.setAttribute("title","Save the form data as a 'new' FHIR resource to the selected FHIR server."),C.style.height="25px",C.style.cursor="pointer",y.appendChild(C),C},k=y=>{const C=new Date,l=new Date(y),x=Math.floor((C-l)/864e5);if(x<30)return x+" Days";if(x>=30&&x<4380){const O=Math.floor(x/365),F=Math.floor(x%365/30);return 0===O?F+" Months":O+" Years "+F+" Months"}return Math.floor(x/365)+" Years"}},1119:(b,c,t)=>{"use strict";t.d(c,{Jy:()=>r,ME:()=>i,f9:()=>T,kT:()=>B,rz:()=>j,se:()=>d,u5:()=>I,uq:()=>w,w0:()=>P});const r="Apps",i="Responses",d="Consents",P=1,T=2,I=3,w=4,j=5,B="R4"},4636:(b,c,t)=>{"use strict";t.d(c,{N:()=>P});var n=(()=>{return(T=n||(n={})).LOCAL="local",T.PROD="production",n;var T})();const P={production:!1,version:"0.0.0",appName:"VirtualTRUST",envName:n.LOCAL,defaultLanguage:"en",camundaApiUrl:"https://vt-camunda-api-demo.intercorpvt.com",serverUrl:"https://fhirdemo.intercorpvt.com",fHirUrl:"https://fhirdemo.intercorpvt.com:18000/fhir",fHirUrl18008:"https://fhirdemo.intercorpvt.com:18008/fhir"}},2360:(b,c,t)=>{var n,o;void 0!==(o="function"==typeof(n=function(){"use strict";function r(l,S){if(!(l instanceof S))throw new TypeError("Cannot call a class as a function")}function i(l,S){for(var _=0;_<S.length;_++){var x=S[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(l,x.key,x)}}function d(l,S,_){return S&&i(l.prototype,S),_&&i(l,_),Object.defineProperty(l,"prototype",{writable:!1}),l}function E(l,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(S&&S.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),S&&T(l,S)}function P(l){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)})(l)}function T(l,S){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,O){return x.__proto__=O,x})(l,S)}function w(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function B(l){var S=function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,x=P(l);if(S){var F=P(this).constructor;O=Reflect.construct(x,arguments,F)}else O=x.apply(this,arguments);return function j(l,S){if(S&&("object"==typeof S||"function"==typeof S))return S;if(void 0!==S)throw new TypeError("Derived constructors may only return object or undefined");return w(l)}(this,O)}}function p(){return p=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(S,_,x){var O=function R(l,S){for(;!Object.prototype.hasOwnProperty.call(l,S)&&null!==(l=P(l)););return l}(S,_);if(O){var F=Object.getOwnPropertyDescriptor(O,_);return F.get?F.get.call(arguments.length<3?S:x):F.value}},p.apply(this,arguments)}var l,A=function(){function l(){r(this,l),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return d(l,[{key:"addEventListener",value:function(_,x,O){_ in this.listeners||(this.listeners[_]=[]),this.listeners[_].push({callback:x,options:O})}},{key:"removeEventListener",value:function(_,x){if(_ in this.listeners)for(var O=this.listeners[_],F=0,D=O.length;F<D;F++)if(O[F].callback===x)return void O.splice(F,1)}},{key:"dispatchEvent",value:function(_){if(_.type in this.listeners){for(var O=this.listeners[_.type].slice(),F=0,D=O.length;F<D;F++){var N=O[F];try{N.callback.call(this,_)}catch(H){Promise.resolve().then(function(){throw H})}N.options&&N.options.once&&this.removeEventListener(_.type,N.callback)}return!_.defaultPrevented}}}]),l}(),k=function(l){E(_,l);var S=B(_);function _(){var x;return r(this,_),(x=S.call(this)).listeners||A.call(w(x)),Object.defineProperty(w(x),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(w(x),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(w(x),"reason",{value:void 0,writable:!0,configurable:!0}),x}return d(_,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(O){"abort"===O.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,O)),p(P(_.prototype),"dispatchEvent",this).call(this,O)}}]),_}(A),y=function(){function l(){r(this,l),Object.defineProperty(this,"signal",{value:new k,writable:!0,configurable:!0})}return d(l,[{key:"abort",value:function(_){var x;try{x=new Event("abort")}catch{typeof document<"u"?document.createEvent?(x=document.createEvent("Event")).initEvent("abort",!1,!1):(x=document.createEventObject()).type="abort":x={type:"abort",bubbles:!1,cancelable:!1}}var O=_;if(void 0===O)if(typeof document>"u")(O=new Error("This operation was aborted")).name="AbortError";else try{O=new DOMException("signal is aborted without reason")}catch{(O=new Error("This operation was aborted")).name="AbortError"}this.signal.reason=O,this.signal.dispatchEvent(x)}},{key:"toString",value:function(){return"[object AbortController]"}}]),l}();typeof Symbol<"u"&&Symbol.toStringTag&&(y.prototype[Symbol.toStringTag]="AbortController",k.prototype[Symbol.toStringTag]="AbortSignal"),function C(l){return l.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof l.Request&&!l.Request.prototype.hasOwnProperty("signal")||!l.AbortController}(l=typeof self<"u"?self:global)&&(l.AbortController=y,l.AbortSignal=k)})?n.call(c,t,c,b):n)&&(b.exports=o)},8472:function(b,c){var r,t=typeof self<"u"?self:this,n=function(){function r(){this.fetch=!1,this.DOMException=t.DOMException}return r.prototype=t,new r}();r=n,function(d){var E={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(E.arrayBuffer)var T=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],I=ArrayBuffer.isView||function(g){return g&&T.indexOf(Object.prototype.toString.call(g))>-1};function w(g){if("string"!=typeof g&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(g))throw new TypeError("Invalid character in header field name");return g.toLowerCase()}function j(g){return"string"!=typeof g&&(g=String(g)),g}function B(g){var s={next:function(){var a=g.shift();return{done:void 0===a,value:a}}};return E.iterable&&(s[Symbol.iterator]=function(){return s}),s}function R(g){this.map={},g instanceof R?g.forEach(function(s,a){this.append(a,s)},this):Array.isArray(g)?g.forEach(function(s){this.append(s[0],s[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(s){this.append(s,g[s])},this)}function p(g){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}function A(g){return new Promise(function(s,a){g.onload=function(){s(g.result)},g.onerror=function(){a(g.error)}})}function k(g){var s=new FileReader,a=A(s);return s.readAsArrayBuffer(g),a}function l(g){if(g.slice)return g.slice(0);var s=new Uint8Array(g.byteLength);return s.set(new Uint8Array(g)),s.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(g){this._bodyInit=g,g?"string"==typeof g?this._bodyText=g:E.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:E.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:E.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():E.arrayBuffer&&E.blob&&function P(g){return g&&DataView.prototype.isPrototypeOf(g)}(g)?(this._bodyArrayBuffer=l(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):E.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||I(g))?this._bodyArrayBuffer=l(g):this._bodyText=g=Object.prototype.toString.call(g):this._bodyText="",this.headers.get("content-type")||("string"==typeof g?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):E.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},E.blob&&(this.blob=function(){var g=p(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var g=p(this);if(g)return g;if(this._bodyBlob)return function y(g){var s=new FileReader,a=A(s);return s.readAsText(g),a}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function C(g){for(var s=new Uint8Array(g),a=new Array(s.length),u=0;u<s.length;u++)a[u]=String.fromCharCode(s[u]);return a.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},E.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}R.prototype.append=function(g,s){g=w(g),s=j(s);var a=this.map[g];this.map[g]=a?a+", "+s:s},R.prototype.delete=function(g){delete this.map[w(g)]},R.prototype.get=function(g){return g=w(g),this.has(g)?this.map[g]:null},R.prototype.has=function(g){return this.map.hasOwnProperty(w(g))},R.prototype.set=function(g,s){this.map[w(g)]=j(s)},R.prototype.forEach=function(g,s){for(var a in this.map)this.map.hasOwnProperty(a)&&g.call(s,this.map[a],a,this)},R.prototype.keys=function(){var g=[];return this.forEach(function(s,a){g.push(a)}),B(g)},R.prototype.values=function(){var g=[];return this.forEach(function(s){g.push(s)}),B(g)},R.prototype.entries=function(){var g=[];return this.forEach(function(s,a){g.push([a,s])}),B(g)},E.iterable&&(R.prototype[Symbol.iterator]=R.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(g,s){var a=(s=s||{}).body;if(g instanceof O){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,s.headers||(this.headers=new R(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!a&&null!=g._bodyInit&&(a=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=s.credentials||this.credentials||"same-origin",(s.headers||!this.headers)&&(this.headers=new R(s.headers)),this.method=function x(g){var s=g.toUpperCase();return _.indexOf(s)>-1?s:g}(s.method||this.method||"GET"),this.mode=s.mode||this.mode||null,this.signal=s.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function F(g){var s=new FormData;return g.trim().split("&").forEach(function(a){if(a){var u=a.split("="),e=u.shift().replace(/\+/g," "),f=u.join("=").replace(/\+/g," ");s.append(decodeURIComponent(e),decodeURIComponent(f))}}),s}function D(g){var s=new R;return g.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(u){var e=u.split(":"),f=e.shift().trim();if(f){var v=e.join(":").trim();s.append(f,v)}}),s}function N(g,s){s||(s={}),this.type="default",this.status=void 0===s.status?200:s.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in s?s.statusText:"OK",this.headers=new R(s.headers),this.url=s.url||"",this._initBody(g)}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})},S.call(O.prototype),S.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},N.error=function(){var g=new N(null,{status:0,statusText:""});return g.type="error",g};var H=[301,302,303,307,308];N.redirect=function(g,s){if(-1===H.indexOf(s))throw new RangeError("Invalid status code");return new N(null,{status:s,headers:{location:g}})},d.DOMException=r.DOMException;try{new d.DOMException}catch{d.DOMException=function(s,a){this.message=s,this.name=a;var u=Error(s);this.stack=u.stack},d.DOMException.prototype=Object.create(Error.prototype),d.DOMException.prototype.constructor=d.DOMException}function W(g,s){return new Promise(function(a,u){var e=new O(g,s);if(e.signal&&e.signal.aborted)return u(new d.DOMException("Aborted","AbortError"));var f=new XMLHttpRequest;function v(){f.abort()}f.onload=function(){var m={status:f.status,statusText:f.statusText,headers:D(f.getAllResponseHeaders()||"")};m.url="responseURL"in f?f.responseURL:m.headers.get("X-Request-URL"),a(new N("response"in f?f.response:f.responseText,m))},f.onerror=function(){u(new TypeError("Network request failed"))},f.ontimeout=function(){u(new TypeError("Network request failed"))},f.onabort=function(){u(new d.DOMException("Aborted","AbortError"))},f.open(e.method,e.url,!0),"include"===e.credentials?f.withCredentials=!0:"omit"===e.credentials&&(f.withCredentials=!1),"responseType"in f&&E.blob&&(f.responseType="blob"),e.headers.forEach(function(m,U){f.setRequestHeader(U,m)}),e.signal&&(e.signal.addEventListener("abort",v),f.onreadystatechange=function(){4===f.readyState&&e.signal.removeEventListener("abort",v)}),f.send(typeof e._bodyInit>"u"?null:e._bodyInit)})}W.polyfill=!0,r.fetch||(r.fetch=W,r.Headers=R,r.Request=O,r.Response=N),d.Headers=R,d.Request=O,d.Response=N,d.fetch=W,Object.defineProperty(d,"__esModule",{value:!0})}({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(c=o.fetch).default=o.fetch,c.fetch=o.fetch,c.Headers=o.Headers,c.Request=o.Request,c.Response=o.Response,b.exports=c},1455:(b,c,t)=>{c.formatArgs=function o(P){if(P[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+P[0]+(this.useColors?"%c ":" ")+"+"+b.exports.humanize(this.diff),!this.useColors)return;const T="color: "+this.color;P.splice(1,0,T,"color: inherit");let I=0,w=0;P[0].replace(/%[a-zA-Z%]/g,j=>{"%%"!==j&&(I++,"%c"===j&&(w=I))}),P.splice(w,0,T)},c.save=function r(P){try{P?c.storage.setItem("debug",P):c.storage.removeItem("debug")}catch{}},c.load=function i(){let P;try{P=c.storage.getItem("debug")}catch{}return!P&&typeof process<"u"&&"env"in process&&(P=process.env.DEBUG),P},c.useColors=function n(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},c.storage=function d(){try{return localStorage}catch{}}(),c.destroy=(()=>{let P=!1;return()=>{P||(P=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],c.log=console.debug||console.log||(()=>{}),b.exports=t(3283)(c);const{formatters:E}=b.exports;E.j=function(P){try{return JSON.stringify(P)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}}},3283:(b,c,t)=>{b.exports=function n(o){function i(B){let R,A,k,p=null;function y(...C){if(!y.enabled)return;const l=y,S=Number(new Date);l.diff=S-(R||S),l.prev=R,l.curr=S,R=S,C[0]=i.coerce(C[0]),"string"!=typeof C[0]&&C.unshift("%O");let x=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(F,D)=>{if("%%"===F)return"%";x++;const N=i.formatters[D];return"function"==typeof N&&(F=N.call(l,C[x]),C.splice(x,1),x--),F}),i.formatArgs.call(l,C),(l.log||i.log).apply(l,C)}return y.namespace=B,y.useColors=i.useColors(),y.color=i.selectColor(B),y.extend=d,y.destroy=i.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==p?p:(A!==i.namespaces&&(A=i.namespaces,k=i.enabled(B)),k),set:C=>{p=C}}),"function"==typeof i.init&&i.init(y),y}function d(B,R){const p=i(this.namespace+(typeof R>"u"?":":R)+B);return p.log=this.log,p}function I(B){return B.toString().substring(2,B.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function w(B){return B instanceof Error?B.stack||B.message:B},i.disable=function P(){const B=[...i.names.map(I),...i.skips.map(I).map(R=>"-"+R)].join(",");return i.enable(""),B},i.enable=function E(B){let R;i.save(B),i.namespaces=B,i.names=[],i.skips=[];const p=("string"==typeof B?B:"").split(/[\s,]+/),A=p.length;for(R=0;R<A;R++)p[R]&&("-"===(B=p[R].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+B.slice(1)+"$")):i.names.push(new RegExp("^"+B+"$")))},i.enabled=function T(B){if("*"===B[B.length-1])return!0;let R,p;for(R=0,p=i.skips.length;R<p;R++)if(i.skips[R].test(B))return!1;for(R=0,p=i.names.length;R<p;R++)if(i.names[R].test(B))return!0;return!1},i.humanize=t(4366),i.destroy=function j(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(o).forEach(B=>{i[B]=o[B]}),i.names=[],i.skips=[],i.formatters={},i.selectColor=function r(B){let R=0;for(let p=0;p<B.length;p++)R=(R<<5)-R+B.charCodeAt(p),R|=0;return i.colors[Math.abs(R)%i.colors.length]},i.enable(i.load()),i}},3727:(b,c,t)=>{"use strict";var n=t(7156).default;Object.defineProperty(c,"__esModule",{value:!0});const o=t(5221),r=t(6340),i=t(9804),{Response:d}=typeof FHIRCLIENT_PURE<"u"?window:t(8472),E=o.debug.extend("client");function T(){return T=n(function*(R,p){const A=(0,o.absolute)("/",p.state.serverUrl);function k(C){return y.apply(this,arguments)}function y(){return(y=n(function*(C){const l=C.pathname.split("/").pop();(0,o.assert)(l,`Invalid url "${C}"`),(0,o.assert)(i.patientCompartment.indexOf(l)>-1,`Cannot filter "${l}" resources by patient`);const S=yield(0,o.fetchConformanceStatement)(p.state.serverUrl),_=(0,o.getPatientParam)(S,l);return C.searchParams.set(_,p.patient.id),C.href})).apply(this,arguments)}return"string"==typeof R||R instanceof URL?{url:yield k(new URL(R+"",A))}:(R.url=yield k(new URL(R.url+"",A)),R)}),T.apply(this,arguments)}function j(R,p,A,k,y){let C=(0,o.makeArray)(p.resolveReferences).filter(Boolean).map(_=>String(_).trim()).filter(Boolean);if(C=C.filter((_,x)=>!(C.indexOf(_,x+1)>-1&&(E('Duplicated reference path "%s"',_),1))),!C.length)return Promise.resolve();const l={};C.forEach(_=>{const x=_.split(".").length;l[x]||(l[x]=[]),l[x].push(_)});let S=Promise.resolve();return Object.keys(l).sort().forEach(_=>{const x=l[_];S=S.then(()=>Promise.all(x.map(O=>function w(R,p,A,k,y,C){const l=(0,o.getPath)(R,p);if(l){const S=Array.isArray(l);return Promise.all((0,o.makeArray)(l).filter(Boolean).map((_,x)=>{const O=_.reference;if(O)return function I(R,p,A,k){return p[R]||(p[R]=A.request({url:R,signal:k}).then(y=>(p[R]=y,y),y=>{throw delete p[R],y})),Promise.resolve(p[R])}(O,k,y,C).then(F=>{A&&(S?p.indexOf("..")>-1?(0,o.setPath)(R,`${p.replace("..",`.${x}.`)}`,F):(0,o.setPath)(R,`${p}.${x}`,F):(0,o.setPath)(R,p,F))}).catch(F=>{if(404!==F.status)throw F})}))}}(R,O,!!p.graph,A,k,y))))}),S}c.default=class B{constructor(p,A){var k=this;this.units=o.units;const y="string"==typeof A?{serverUrl:A}:A;(0,o.assert)(y.serverUrl&&y.serverUrl.match(/https?:\/\/.+/),'A "serverUrl" option is required and must begin with "http(s)"'),this.state=y,this.environment=p,this._refreshTask=null;const C=this;this.patient={get id(){return C.getPatientId()},read:l=>{const S=this.patient.id;return S?this.request(Object.assign(Object.assign({},l),{url:`Patient/${S}`})):Promise.reject(new Error("Patient is not available"))},request:(l,S={})=>this.patient.id?n(function*(){const _=yield function P(R,p){return T.apply(this,arguments)}(l,k);return k.request(_,S)})():Promise.reject(new Error("Patient is not available"))},this.encounter={get id(){return C.getEncounterId()},read:l=>{const S=this.encounter.id;return S?this.request(Object.assign(Object.assign({},l),{url:`Encounter/${S}`})):Promise.reject(new Error("Encounter is not available"))}},this.user={get fhirUser(){return C.getFhirUser()},get id(){return C.getUserId()},get resourceType(){return C.getUserType()},read:l=>{const S=this.user.fhirUser;return S?this.request(Object.assign(Object.assign({},l),{url:S})):Promise.reject(new Error("User is not available"))}},this.connect(p.fhir)}connect(p){if("function"==typeof p){const A={baseUrl:this.state.serverUrl.replace(/\/$/,"")},k=this.getState("tokenResponse.access_token");if(k)A.auth={token:k};else{const{username:C,password:l}=this.state;C&&l&&(A.auth={user:C,pass:l})}this.api=p(A);const y=this.getState("tokenResponse.patient");y&&(this.patient.api=p(Object.assign(Object.assign({},A),{patient:y})))}return this}getPatientId(){const p=this.state.tokenResponse;return p?p.patient?p.patient:((this.state.scope||"").match(/\blaunch(\/patient)?\b/)?E("The ID of the selected patient is not available. Please check if your server supports that."):E(r.default.noScopeForId,"patient","patient"),null):(this.state.authorizeUri?E(r.default.noIfNoAuth,"the ID of the selected patient"):E(r.default.noFreeContext,"selected patient"),null)}getEncounterId(){const p=this.state.tokenResponse;return p?p.encounter?p.encounter:((this.state.scope||"").match(/\blaunch(\/encounter)?\b/)?E("The ID of the selected encounter is not available. Please check if your server supports that, and that the selected patient has any recorded encounters."):E(r.default.noScopeForId,"encounter","encounter"),null):(this.state.authorizeUri?E(r.default.noIfNoAuth,"the ID of the selected encounter"):E(r.default.noFreeContext,"selected encounter"),null)}getIdToken(){const p=this.state.tokenResponse;if(p){const A=p.id_token,k=this.state.scope||"";if(!A){const y=k.match(/\bopenid\b/),C=k.match(/\bprofile\b/),l=k.match(/\bfhirUser\b/);return E(y&&(l||C)?"The id_token is not available. Please check if your server supports that.":"You are trying to get the id_token but you are not using the right scopes. Please add 'openid' and 'fhirUser' or 'profile' to the scopes you are requesting."),null}return(0,o.jwtDecode)(A,this.environment)}return this.state.authorizeUri?E(r.default.noIfNoAuth,"the id_token"):E(r.default.noFreeContext,"id_token"),null}getFhirUser(){const p=this.getIdToken();return p?p.fhirUser?p.fhirUser.split("/").slice(-2).join("/"):p.profile:null}getUserId(){const p=this.getFhirUser();return p?p.split("/")[1]:null}getUserType(){const p=this.getFhirUser();return p?p.split("/")[0]:null}getAuthorizationHeader(){const p=this.getState("tokenResponse.access_token");if(p)return"Bearer "+p;const{username:A,password:k}=this.state;return A&&k?"Basic "+this.environment.btoa(A+":"+k):null}_clearState(){var p=this;return n(function*(){const A=p.environment.getStorage(),k=yield A.get(i.SMART_KEY);k&&(yield A.unset(k)),yield A.unset(i.SMART_KEY),p.state.tokenResponse={}})()}create(p,A){return this.request(Object.assign(Object.assign({},A),{url:`${p.resourceType}`,method:"POST",body:JSON.stringify(p),headers:Object.assign({"content-type":"application/json"},(A||{}).headers)}))}update(p,A){return this.request(Object.assign(Object.assign({},A),{url:`${p.resourceType}/${p.id}`,method:"PUT",body:JSON.stringify(p),headers:Object.assign({"content-type":"application/json"},(A||{}).headers)}))}delete(p,A={}){return this.request(Object.assign(Object.assign({},A),{url:p,method:"DELETE"}))}patch(p,A,k={}){var y=this;return n(function*(){return(0,o.assertJsonPatch)(A),y.request(Object.assign(Object.assign({},k),{url:p,method:"PATCH",body:JSON.stringify(A),headers:Object.assign({prefer:"return=presentation","content-type":"application/json-patch+json; charset=UTF-8"},k.headers)}))})()}request(p,A={},k={}){var y=this;return n(function*(){var C;const l=o.debug.extend("client:request");let S;(0,o.assert)(p,"request requires an url or request options as argument"),"string"==typeof p||p instanceof URL?(S=String(p),p={}):S=String(p.url),S=(0,o.absolute)(S,y.state.serverUrl);const _={graph:!1!==A.graph,flat:!!A.flat,pageLimit:null!==(C=A.pageLimit)&&void 0!==C?C:1,resolveReferences:A.resolveReferences||[],useRefreshToken:!1!==A.useRefreshToken,onPage:"function"==typeof A.onPage?A.onPage:void 0},x=p.signal||void 0;let F;return(_.useRefreshToken?y.refreshIfNeeded({signal:x}).then(()=>p):Promise.resolve(p)).then(D=>{const N=y.getAuthorizationHeader();return N&&(D.headers=Object.assign(Object.assign({},D.headers),{authorization:N})),D}).then(D=>(l("%s, options: %O, fhirOptions: %O",S,D,_),(0,o.request)(S,D).then(N=>D.includeResponse?(F=N.response,N.body):N))).catch(function(){var D=n(function*(N){throw 401==N.status?y.getState("tokenResponse.access_token")?_.useRefreshToken?(l("Auto-refresh failed! Please re-launch the app."),yield y._clearState(),N.message+="\n"+r.default.expired,N):(l("Your session has expired and the useRefreshToken option is set to false. Please re-launch the app."),yield y._clearState(),N.message+="\n"+r.default.expired,N):(N.message+="\nThis app cannot be accessed directly. Please launch it as SMART app!",N):N});return function(N){return D.apply(this,arguments)}}()).catch(D=>{throw 403==D.status&&l("Permission denied! Please make sure that you have requested the proper scopes."),D}).then(D=>{return!D||"string"==typeof D||D instanceof d?D:(N=n(function*(H){return"Bundle"==H.resourceType?yield Promise.all((H.entry||[]).map(W=>j(W.resource,_,k,y,x))):yield j(H,_,k,y,x),H}),function(H){return N.apply(this,arguments)})(D).then(function(){var N=n(function*(H){if(H&&"Bundle"==H.resourceType){const W=H.link||[];if(_.flat&&(H=(H.entry||[]).map(g=>g.resource)),_.onPage&&(yield _.onPage(H,Object.assign({},k))),--_.pageLimit){const g=W.find(s=>"next"==s.relation);if(H=(0,o.makeArray)(H),g&&g.url){const s=yield y.request({url:g.url,signal:x},_,k);return _.onPage?null:_.resolveReferences.length?(Object.assign(k,s.references),H.concat((0,o.makeArray)(s.data||s))):H.concat((0,o.makeArray)(s))}}}return H});return function(H){return N.apply(this,arguments)}}()).then(N=>{if(_.graph)k={};else if(!_.onPage&&_.resolveReferences.length)return{data:N,references:k};return N}).then(N=>p.includeResponse?{body:N,response:F}:N);var N})})()}refreshIfNeeded(p={}){const A=this.getState("tokenResponse.access_token"),k=this.getState("tokenResponse.refresh_token");return A&&k&&(this.state.expiresAt||0)-10<Date.now()/1e3?this.refresh(p):Promise.resolve(this.state)}refresh(p={}){var A,k;const y=o.debug.extend("client:refresh");y("Attempting to refresh with refresh_token...");const C=null===(k=null===(A=this.state)||void 0===A?void 0:A.tokenResponse)||void 0===k?void 0:k.refresh_token;(0,o.assert)(C,"Unable to refresh. No refresh_token found.");const l=this.state.tokenUri;(0,o.assert)(l,"Unable to refresh. No tokenUri found.");const S=this.getState("tokenResponse.scope")||"",_=S.search(/\boffline_access\b/)>-1,x=S.search(/\bonline_access\b/)>-1;if((0,o.assert)(_||x,"Unable to refresh. No offline_access or online_access scope found."),!this._refreshTask){const O=Object.assign(Object.assign({credentials:this.environment.options.refreshTokenWithCredentials||"same-origin"},p),{method:"POST",mode:"cors",headers:Object.assign(Object.assign({},p.headers||{}),{"content-type":"application/x-www-form-urlencoded"}),body:`grant_type=refresh_token&refresh_token=${encodeURIComponent(C)}`});if(!("authorization"in O.headers)){const{clientSecret:F,clientId:D}=this.state;F&&(O.headers.authorization="Basic "+this.environment.btoa(D+":"+F))}this._refreshTask=(0,o.request)(l,O).then(F=>((0,o.assert)(F.access_token,"No access token received"),y("Received new access token response %O",F),this.state.tokenResponse=Object.assign(Object.assign({},this.state.tokenResponse),F),this.state.expiresAt=(0,o.getAccessTokenExpiration)(F,this.environment),this.state)).catch(F=>{var D,N;throw!(null===(N=null===(D=this.state)||void 0===D?void 0:D.tokenResponse)||void 0===N)&&N.refresh_token&&(y("Deleting the expired or invalid refresh token."),delete this.state.tokenResponse.refresh_token),F}).finally(()=>{this._refreshTask=null;const F=this.state.key;F?this.environment.getStorage().set(F,this.state):y("No 'key' found in Clint.state. Cannot persist the instance.")})}return this._refreshTask}byCode(p,A){return(0,o.byCode)(p,A)}byCodes(p,A){return(0,o.byCodes)(p,A)}getPath(p,A=""){return(0,o.getPath)(p,A)}getState(p=""){return(0,o.getPath)(Object.assign({},this.state),p)}getFhirVersion(){return(0,o.fetchConformanceStatement)(this.state.serverUrl).then(p=>p.fhirVersion)}getFhirRelease(){return this.getFhirVersion().then(p=>{var A;return null!==(A=i.fhirVersions[p])&&void 0!==A?A:0})}}},5973:(b,c,t)=>{"use strict";var n=t(7156).default;Object.defineProperty(c,"__esModule",{value:!0});class o extends Error{constructor(i){super(`${i.status} ${i.statusText}\nURL: ${i.url}`),this.name="HttpError",this.response=i,this.statusCode=i.status,this.status=i.status,this.statusText=i.statusText}parse(){var i=this;return n(function*(){if(!i.response.bodyUsed)try{const d=i.response.headers.get("content-type")||"text/plain";if(d.match(/\bjson\b/i)){let E=yield i.response.json();E.error?(i.message+="\n"+E.error,E.error_description&&(i.message+=": "+E.error_description)):i.message+="\n\n"+JSON.stringify(E,null,4)}else if(d.match(/^text\//i)){let E=yield i.response.text();E&&(i.message+="\n\n"+E)}}catch{}return i})()}toJSON(){return{name:this.name,statusCode:this.statusCode,status:this.status,statusText:this.statusText,message:this.message}}}c.default=o},2341:(b,c,t)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});const n=t(9867),o=t(3727),r=t(9569),i=t(5896),d=t(28);c.default=class E{constructor(T={}){this._url=null,this._storage=null,this.security=i,this.options=Object.assign({replaceBrowserHistory:!0,fullSessionStorageSupport:!0,refreshTokenWithCredentials:"same-origin"},T)}relative(T){return new URL(T,this.getUrl().href).href}get fhir(){return"function"==typeof fhir?fhir:null}getUrl(){return this._url||(this._url=new URL(location+"")),this._url}redirect(T){location.href=T}getStorage(){return this._storage||(this._storage=new r.default),this._storage}getAbortController(){return AbortController}atob(T){return window.atob(T)}btoa(T){return window.btoa(T)}base64urlencode(T){return"string"==typeof T?(0,d.encodeURL)(T):(0,d.fromUint8Array)(T,!0)}base64urldecode(T){return(0,d.decode)(T)}getSmartApi(){return{ready:(...T)=>(0,n.ready)(this,...T),authorize:T=>(0,n.authorize)(this,T),init:T=>(0,n.init)(this,T),client:T=>new o.default(this,T),options:this.options,utils:{security:i}}}}},6724:(b,c,t)=>{"use strict";const o=new(t(2341).default),{ready:r,authorize:i,init:d,client:E,options:P,utils:T}=o.getSmartApi();if(typeof FHIRCLIENT_PURE>"u"){const w=t(8472);t(2360),window.fetch||(window.fetch=w.default,window.Headers=w.Headers,window.Request=w.Request,window.Response=w.Response)}const I={AbortController:window.AbortController,client:E,utils:T,oauth2:{settings:P,ready:r,authorize:i,init:d}};b.exports=I},5221:(b,c,t)=>{"use strict";var n=t(7156).default,o=function(u,e){var f={};for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&e.indexOf(v)<0&&(f[v]=u[v]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var m=0;for(v=Object.getOwnPropertySymbols(u);m<v.length;m++)e.indexOf(v[m])<0&&Object.prototype.propertyIsEnumerable.call(u,v[m])&&(f[v[m]]=u[v[m]])}return f};Object.defineProperty(c,"__esModule",{value:!0}),c.assertJsonPatch=c.assert=c.getTargetWindow=c.getPatientParam=c.byCodes=c.byCode=c.getAccessTokenExpiration=c.getTimeInFuture=c.jwtDecode=c.randomString=c.absolute=c.makeArray=c.setPath=c.getPath=c.fetchConformanceStatement=c.getAndCache=c.request=c.loweCaseKeys=c.responseToJSON=c.checkResponse=c.units=c.debug=void 0;const r=t(5973),i=t(9804),d=t(1455),{fetch:E}=typeof FHIRCLIENT_PURE<"u"?window:t(8472),P=d("FHIR");c.debug=P;const T={};function I({value:u,code:e}){if("number"!=typeof u)throw new Error("Found a non-numerical unit: "+u+" "+e)}function w(u){return j.apply(this,arguments)}function j(){return(j=n(function*(u){if(!u.ok){const e=new r.default(u);throw yield e.parse(),e}return u})).apply(this,arguments)}function B(u){return u.text().then(e=>e.length?JSON.parse(e):"")}function R(u){if(!u)return u;if(Array.isArray(u))return u.map(f=>f&&"object"==typeof f?R(f):f);let e={};return Object.keys(u).forEach(f=>{const v=f.toLowerCase(),m=u[f];e[v]=m&&"object"==typeof m?R(m):m}),e}function p(u,e={}){const{includeResponse:f}=e,v=o(e,["includeResponse"]);return E(u,Object.assign(Object.assign({mode:"cors"},v),{headers:Object.assign({accept:"application/json"},R(v.headers))})).then(w).then(m=>{const U=m.headers.get("content-type")+"";return U.match(/\bjson\b/i)?B(m).then($=>({res:m,body:$})):U.match(/^text\//i)?m.text().then($=>({res:m,body:$})):{res:m}}).then(({res:m,body:U})=>{if(!U&&201==m.status){const $=m.headers.get("location");if($)return p($,Object.assign(Object.assign({},v),{method:"GET",body:null,includeResponse:f}))}return f?{body:U,response:m}:void 0===U?m:U})}function A(u,e,f=!1){return f||!T[u]?(T[u]=p(u,e),T[u]):Promise.resolve(T[u])}function y(u,e=""){if(!(e=e.trim()))return u;let f=e.split("."),v=u;for(;v&&f.length;){const m=f.shift();if(!m&&Array.isArray(v))return v.map(U=>y(U,f.join(".")));v=v[m]}return v}function l(u){return Array.isArray(u)?u:[u]}function x(u,e){const f=u.split(".")[1];return f?JSON.parse(e.atob(f)):null}function D(u,e){const f={};function v(m,U){m&&Array.isArray(m.coding)&&m.coding.forEach(({code:$})=>{$&&(f[$]=f[$]||[],f[$].push(U))})}return l(u).forEach(m=>{"Observation"===m.resourceType&&m[e]&&(Array.isArray(m[e])?m[e].forEach(U=>v(U,m)):v(m[e],m))}),f}function g(){return(g=n(function*(u,e=800,f=720){if("function"==typeof u&&(u=yield u()),u&&"object"==typeof u)return u;if("string"!=typeof u)return P("Invalid target type '%s'. Failing back to '_self'.",typeof u),self;if("_self"==u)return self;if("_parent"==u)return parent;if("_top"==u)return top||self;if("_blank"==u){let m,U=null;try{if(U=window.open("","SMARTAuthPopup"),!U)throw new Error("Perhaps window.open was blocked")}catch($){m=$}return U||(P("Cannot open window. Failing back to '_self'. %s",m),self)}if("popup"==u){let m,U=null;try{if(U=window.open("","SMARTAuthPopup",["height="+f,"width="+e,"menubar=0","resizable=1","status=0","top="+(screen.height-f)/2,"left="+(screen.width-e)/2].join(",")),!U)throw new Error("Perhaps the popup window was blocked")}catch($){m=$}return U||(P("Cannot open window. Failing back to '_self'. %s",m),self)}return frames[u]||(P("Unknown target '%s'. Failing back to '_self'.",u),self)})).apply(this,arguments)}function s(u,e){if(!u)throw new Error(e)}c.units={cm({code:u,value:e}){if(I({code:u,value:e}),"cm"==u)return e;if("m"==u)return 100*e;if("in"==u||"[in_us]"==u||"[in_i]"==u)return 2.54*e;if("ft"==u||"[ft_us]"==u)return 30.48*e;throw new Error("Unrecognized length unit: "+u)},kg({code:u,value:e}){if(I({code:u,value:e}),"kg"==u)return e;if("g"==u)return e/1e3;if(u.match(/lb/))return e/2.20462;if(u.match(/oz/))return e/35.274;throw new Error("Unrecognized weight unit: "+u)},any:u=>(I(u),u.value)},c.checkResponse=w,c.responseToJSON=B,c.loweCaseKeys=R,c.request=p,c.getAndCache=A,c.fetchConformanceStatement=function k(u="/",e){const f=String(u).replace(/\/*$/,"/")+"metadata";return A(f,e).catch(v=>{throw new Error(`Failed to fetch the conformance statement from "${f}". ${v}`)})},c.getPath=y,c.setPath=function C(u,e,f,v=!1){return e.trim().split(".").reduce((m,U,$,L)=>{if(!m||$!==L.length-1)return m&&void 0===m[U]&&v&&(m[U]=L[$+1].match(/^[0-9]+$/)?[]:{}),m?m[U]:void 0;m[U]=f},u),u},c.makeArray=l,c.absolute=function S(u,e){return u.match(/^http/)||u.match(/^urn/)?u:String(e||"").replace(/\/+$/,"")+"/"+u.replace(/^\/+/,"")},c.randomString=function _(u=8,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){const f=[],v=e.length;for(;u--;)f.push(e.charAt(Math.floor(Math.random()*v)));return f.join("")},c.jwtDecode=x,c.getTimeInFuture=function O(u=120,e){return Math.floor(+(e||new Date)/1e3+u)},c.getAccessTokenExpiration=function F(u,e){const f=Math.floor(Date.now()/1e3);if(u.expires_in)return f+u.expires_in;if(u.access_token){let v=x(u.access_token,e);if(v&&v.exp)return v.exp}return f+300},c.byCode=D,c.byCodes=function N(u,e){const f=D(u,e);return(...v)=>v.filter(m=>m+""in f).reduce((m,U)=>m.concat(f[U+""]),[])},c.getPatientParam=function H(u,e){const v=(y(u,"rest.0.resource")||[]).find(U=>U.type===e);if(!v)throw new Error(`Resource "${e}" is not supported by this FHIR server`);if(!Array.isArray(v.searchParam))throw new Error(`No search parameters supported for "${e}" on this FHIR server`);if("Patient"==e&&v.searchParam.find(U=>"_id"==U.name))return"_id";const m=i.patientParams.find(U=>v.searchParam.find($=>$.name==U));if(!m)throw new Error("I don't know what param to use for "+e);return m},c.getTargetWindow=function W(u){return g.apply(this,arguments)},c.assert=s,c.assertJsonPatch=function a(u){s(Array.isArray(u),"The JSON patch must be an array"),s(u.length>0,"The JSON patch array should not be empty"),u.forEach(e=>{s(["add","replace","test","move","copy","remove"].indexOf(e.op)>-1,'Each patch operation must have an "op" property which must be one of: "add", "replace", "test", "move", "copy", "remove"'),s(e.path&&typeof e.path,`Invalid "${e.op}" operation. Missing "path" property`),"add"==e.op||"replace"==e.op||"test"==e.op?(s("value"in e,`Invalid "${e.op}" operation. Missing "value" property`),s(3==Object.keys(e).length,`Invalid "${e.op}" operation. Contains unknown properties`)):"move"==e.op||"copy"==e.op?(s("string"==typeof e.from,`Invalid "${e.op}" operation. Requires a string "from" property`),s(3==Object.keys(e).length,`Invalid "${e.op}" operation. Contains unknown properties`)):s(2==Object.keys(e).length,`Invalid "${e.op}" operation. Contains unknown properties`)})}},5896:(b,c,t)=>{"use strict";var n=t(7156).default;t(3462),Object.defineProperty(c,"__esModule",{value:!0}),c.signCompactJws=c.importJWK=c.generatePKCEChallenge=c.digestSha256=c.randomBytes=void 0;const o=t(28),r="object"==typeof globalThis&&globalThis.crypto?globalThis.crypto:t(2718).Z,i=r.subtle,d={ES384:{name:"ECDSA",namedCurve:"P-384"},RS384:{name:"RSASSA-PKCS1-v1_5",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-384"}}};function E(p){return r.getRandomValues(new Uint8Array(p))}function P(p){return T.apply(this,arguments)}function T(){return(T=n(function*(p){const A=(new TextEncoder).encode(p),k=yield i.digest("SHA-256",A);return new Uint8Array(k)})).apply(this,arguments)}function j(){return(j=n(function*(p){if(!p.alg)throw new Error('The "alg" property of the JWK must be set to "ES384" or "RS384"');if(Array.isArray(p.key_ops)||(p.key_ops=["sign"]),!p.key_ops.includes("sign"))throw new Error('The "key_ops" property of the JWK does not contain "sign"');try{return yield i.importKey("jwk",p,d[p.alg],!0===p.ext,p.key_ops)}catch(A){throw new Error(`The ${p.alg} is not supported by this browser: ${A}`)}})).apply(this,arguments)}function R(){return(R=n(function*(p,A,k,y){const C=JSON.stringify(Object.assign(Object.assign({},k),{alg:p})),l=JSON.stringify(y),S=`${(0,o.encodeURL)(C)}.${(0,o.encodeURL)(l)}`,_=yield i.sign(Object.assign(Object.assign({},A.algorithm),{hash:"SHA-384"}),A,(new TextEncoder).encode(S));return`${S}.${(0,o.fromUint8Array)(new Uint8Array(_),!0)}`})).apply(this,arguments)}c.randomBytes=E,c.digestSha256=P,c.generatePKCEChallenge=function(){var p=n(function*(A=96){const k=E(A),y=(0,o.fromUint8Array)(k,!0);return{codeChallenge:(0,o.fromUint8Array)(yield P(y),!0),codeVerifier:y}});return function(){return p.apply(this,arguments)}}(),c.importJWK=function w(p){return j.apply(this,arguments)},c.signCompactJws=function B(p,A,k,y){return R.apply(this,arguments)}},9804:(b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SMART_KEY=c.patientParams=c.fhirVersions=c.patientCompartment=void 0,c.patientCompartment=["Account","AdverseEvent","AllergyIntolerance","Appointment","AppointmentResponse","AuditEvent","Basic","BodySite","BodyStructure","CarePlan","CareTeam","ChargeItem","Claim","ClaimResponse","ClinicalImpression","Communication","CommunicationRequest","Composition","Condition","Consent","Coverage","CoverageEligibilityRequest","CoverageEligibilityResponse","DetectedIssue","DeviceRequest","DeviceUseRequest","DeviceUseStatement","DiagnosticOrder","DiagnosticReport","DocumentManifest","DocumentReference","EligibilityRequest","Encounter","EnrollmentRequest","EpisodeOfCare","ExplanationOfBenefit","FamilyMemberHistory","Flag","Goal","Group","ImagingManifest","ImagingObjectSelection","ImagingStudy","Immunization","ImmunizationEvaluation","ImmunizationRecommendation","Invoice","List","MeasureReport","Media","MedicationAdministration","MedicationDispense","MedicationOrder","MedicationRequest","MedicationStatement","MolecularSequence","NutritionOrder","Observation","Order","Patient","Person","Procedure","ProcedureRequest","Provenance","QuestionnaireResponse","ReferralRequest","RelatedPerson","RequestGroup","ResearchSubject","RiskAssessment","Schedule","ServiceRequest","Specimen","SupplyDelivery","SupplyRequest","VisionPrescription"],c.fhirVersions={"0.4.0":2,"0.5.0":2,"1.0.0":2,"1.0.1":2,"1.0.2":2,"1.1.0":3,"1.4.0":3,"1.6.0":3,"1.8.0":3,"3.0.0":3,"3.0.1":3,"3.3.0":4,"3.5.0":4,"4.0.0":4,"4.0.1":4},c.patientParams=["patient","subject","requester","member","actor","beneficiary"],c.SMART_KEY="SMART_KEY"},9867:(b,c,t)=>{"use strict";var n=t(7156).default;Object.defineProperty(c,"__esModule",{value:!0}),c.init=c.buildTokenRequest=c.ready=c.onMessage=c.isInPopUp=c.isInFrame=c.authorize=c.getSecurityExtensions=c.fetchWellKnownJson=c.KEY=void 0;const o=t(5221),r=t(3727),i=t(9804);Object.defineProperty(c,"KEY",{enumerable:!0,get:function(){return i.SMART_KEY}});const d=o.debug.extend("oauth2");function E(){return"object"==typeof window}function P(O="/",F){const D=String(O).replace(/\/*$/,"/")+".well-known/smart-configuration";return(0,o.getAndCache)(D,F).catch(N=>{throw new Error(`Failed to fetch the well-known json "${D}". ${N.message}`)})}function w(O="/"){return function T(O="/",F){return P(O,F).then(D=>{if(!D.authorization_endpoint||!D.token_endpoint)throw new Error("Invalid wellKnownJson");return{registrationUri:D.registration_endpoint||"",authorizeUri:D.authorization_endpoint,tokenUri:D.token_endpoint,codeChallengeMethods:D.code_challenge_methods_supported||[]}})}(O).catch(()=>function I(O="/",F){return(0,o.fetchConformanceStatement)(O,F).then(D=>{const H=((0,o.getPath)(D||{},"rest.0.security.extension")||[]).filter(g=>"http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris"===g.url).map(g=>g.extension)[0],W={registrationUri:"",authorizeUri:"",tokenUri:"",codeChallengeMethods:[]};return H&&H.forEach(g=>{"register"===g.url&&(W.registrationUri=g.valueUri),"authorize"===g.url&&(W.authorizeUri=g.valueUri),"token"===g.url&&(W.tokenUri=g.valueUri)}),W})}(O))}function j(O){return B.apply(this,arguments)}function B(){return(B=n(function*(O,F={}){const D=O.getUrl();if(Array.isArray(F)){const X=D.searchParams.get("iss")||D.searchParams.get("fhirServiceUrl");if(!X)throw new Error('Passing in an "iss" url parameter is required if authorize uses multiple configurations');const te=F.find(re=>{if(re.issMatch){if("function"==typeof re.issMatch)return!!re.issMatch(X);if("string"==typeof re.issMatch)return re.issMatch===X;if(re.issMatch instanceof RegExp)return re.issMatch.test(X)}return!1});return(0,o.assert)(te,`No configuration found matching the current "iss" parameter "${X}"`),yield j(O,te)}const{redirect_uri:N,clientSecret:H,fakeTokenResponse:W,patientId:g,encounterId:s,client_id:a,target:u,width:e,height:f,pkceMode:v,clientPublicKeySetUrl:m}=F;let{iss:U,launch:$,fhirServiceUrl:L,redirectUri:h,noRedirect:M,scope:z="",clientId:G,completeInTarget:Q,clientPrivateJwk:K}=F;const J=O.getStorage();U=D.searchParams.get("iss")||U,L=D.searchParams.get("fhirServiceUrl")||L,$=D.searchParams.get("launch")||$,G||(G=a),h||(h=N),h?h.match(/^https?\:\/\//)||(h=O.relative(h)):h=O.relative(".");const Y=String(U||L||"");if(!Y)throw new Error("No server url found. It must be specified as `iss` or as `fhirServiceUrl` parameter");if(U&&d("Making %s launch...",$?"EHR":"standalone"),$&&!z.match(/launch/)&&(z+=" launch"),E()){const X=p(),te=A();(X||te)&&!0!==Q&&!1!==Q&&(Q=X,console.warn('Your app is being authorized from within an iframe or popup window. Please be explicit and provide a "completeInTarget" option. Use "true" to complete the authorization in the same window, or "false" to try to complete it in the parent or the opener window. See http://docs.smarthealthit.org/client-js/api.html'))}const q=yield J.get(i.SMART_KEY);yield J.unset(q);const V=(0,o.randomString)(16),Z={clientId:G,scope:z,redirectUri:h,serverUrl:Y,clientSecret:H,clientPrivateJwk:K,tokenResponse:{},key:V,completeInTarget:Q,clientPublicKeySetUrl:m};(!E()||(0,o.getPath)(O,"options.fullSessionStorageSupport"))&&(yield J.set(i.SMART_KEY,V)),W&&Object.assign(Z.tokenResponse,W),g&&Object.assign(Z.tokenResponse,{patient:g}),s&&Object.assign(Z.tokenResponse,{encounter:s});let ee=h+"?state="+encodeURIComponent(V);if(L&&!U)return d("Making fake launch..."),yield J.set(V,Z),M?ee:yield O.redirect(ee);const oe=yield w(Y);if(Object.assign(Z,oe),yield J.set(V,Z),!Z.authorizeUri)return M?ee:yield O.redirect(ee);const ne=["response_type=code","client_id="+encodeURIComponent(G||""),"scope="+encodeURIComponent(z),"redirect_uri="+encodeURIComponent(h),"aud="+encodeURIComponent(Y),"state="+encodeURIComponent(V)];if($&&ne.push("launch="+encodeURIComponent($)),function R(O,F){if("disabled"===F)return!1;if("unsafeV1"===F)return!0;if("required"===F){if(!O)throw new Error("Required PKCE code challenge method (`S256`) was not found.");return!0}return O}(oe.codeChallengeMethods.includes("S256"),v)){let X=yield O.security.generatePKCEChallenge();Object.assign(Z,X),yield J.set(V,Z),ne.push("code_challenge="+Z.codeChallenge),ne.push("code_challenge_method=S256")}if(ee=Z.authorizeUri+"?"+ne.join("&"),M)return ee;if(!u||!E())return yield O.redirect(ee);{let X;if(X=yield(0,o.getTargetWindow)(u,e,f),X!==self)try{X.sessionStorage.removeItem(q),X.sessionStorage.setItem(V,JSON.stringify(Z))}catch(te){(0,o.debug)('Failed to modify window.sessionStorage. Perhaps it is from different origin?. Failing back to "_self". %s',te),X=self}if(X!==self)try{X.location.href=ee,self.addEventListener("message",k)}catch(te){(0,o.debug)('Failed to modify window.location. Perhaps it is from different origin?. Failing back to "_self". %s',te),self.location.href=ee}else self.location.href=ee}})).apply(this,arguments)}function p(){try{return self!==top&&parent!==self}catch{return!0}}function A(){try{return self===top&&!!opener&&opener!==self&&!!window.name}catch{return!1}}function k(O){"completeAuth"==O.data.type&&O.origin===new URL(self.location.href).origin&&(window.removeEventListener("message",k),window.location.href=O.data.url)}function y(O){return C.apply(this,arguments)}function C(){return(C=n(function*(O,F={}){var D,N;const H=O.getUrl(),W=O.getStorage(),g=H.searchParams;let s=g.get("state");const a=g.get("code"),u=g.get("error"),e=g.get("error_description");if(s||(s=yield W.get(i.SMART_KEY)),u||e)throw new Error([u,e].filter(Boolean).join(": "));d("key: %s, code: %s",s,a),(0,o.assert)(s,"No 'state' parameter found. Please (re)launch the app.");let f=yield W.get(s);const v=!E()||(0,o.getPath)(O,"options.fullSessionStorageSupport");if(E()&&f&&!f.completeInTarget){const L=p(),h=A();if((L||h)&&!H.searchParams.get("complete")){H.searchParams.set("complete","1");const{href:M,origin:z}=H;return L&&parent.postMessage({type:"completeAuth",url:M},z),h&&(opener.postMessage({type:"completeAuth",url:M},z),window.close()),new Promise(()=>{})}}H.searchParams.delete("complete");const m=g.has("state");if(E()&&(0,o.getPath)(O,"options.replaceBrowserHistory")&&(a||m)&&(a&&(g.delete("code"),d("Removed code parameter from the url.")),m&&v&&(g.delete("state"),d("Removed state parameter from the url.")),window.history.replaceState&&window.history.replaceState({},"",H.href)),(0,o.assert)(f,"No state found! Please (re)launch the app."),a&&!(null===(D=f.tokenResponse)||void 0===D?void 0:D.access_token)&&f.tokenUri){(0,o.assert)(a,"'code' url parameter is required"),d("Preparing to exchange the code for access token...");const L=yield l(O,{code:a,state:f,clientPublicKeySetUrl:F.clientPublicKeySetUrl,privateKey:F.privateKey||f.clientPrivateJwk});d("Token request options: %O",L);const h=yield(0,o.request)(f.tokenUri,L);d("Token response: %O",h),(0,o.assert)(h.access_token,"Failed to obtain access token."),f.expiresAt=(0,o.getAccessTokenExpiration)(h,O),f=Object.assign(Object.assign({},f),{tokenResponse:h}),yield W.set(s,f),d("Authorization successful!")}else d(null!==(N=f.tokenResponse)&&void 0!==N&&N.access_token?"Already authorized":"No authorization needed");v&&(yield W.set(i.SMART_KEY,s));const $=new r.default(O,f);return d("Created client instance: %O",$),$})).apply(this,arguments)}function l(O,F){return S.apply(this,arguments)}function S(){return(S=n(function*(O,{code:F,state:D,clientPublicKeySetUrl:N,privateKey:H}){const{redirectUri:W,clientSecret:g,tokenUri:s,clientId:a,codeVerifier:u}=D;(0,o.assert)(W,"Missing state.redirectUri"),(0,o.assert)(s,"Missing state.tokenUri"),(0,o.assert)(a,"Missing state.clientId");const e={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:`code=${F}&grant_type=authorization_code&redirect_uri=${encodeURIComponent(W)}`};if(g)e.headers.authorization="Basic "+O.btoa(a+":"+g),d("Using state.clientSecret to construct the authorization header: %s",e.headers.authorization);else if(H){const f="key"in H?H.key:yield O.security.importJWK(H),v={typ:"JWT",kid:H.kid,jku:N||D.clientPublicKeySetUrl},m={iss:a,sub:a,aud:s,jti:O.base64urlencode(O.security.randomBytes(32)),exp:(0,o.getTimeInFuture)(120)},U=yield O.security.signCompactJws(H.alg,f,v,m);e.body+=`&client_assertion_type=${encodeURIComponent("urn:ietf:params:oauth:client-assertion-type:jwt-bearer")}`,e.body+=`&client_assertion=${encodeURIComponent(U)}`,d("Using state.clientPrivateJwk to add a client_assertion to the POST body")}else d("Public client detected; adding state.clientId to the POST body"),e.body+=`&client_id=${encodeURIComponent(a)}`;return u&&(d("Found state.codeVerifier, adding to the POST body"),e.body+="&code_verifier="+u),e})).apply(this,arguments)}function x(){return(x=n(function*(O,F,D){const N=O.getUrl(),H=N.searchParams.get("code"),W=N.searchParams.get("state");if(H&&W)return y(O,D);const g=O.getStorage(),s=W||(yield g.get(i.SMART_KEY)),a=yield g.get(s);return a?new r.default(O,a):j(O,F).then(()=>new Promise(()=>{}))})).apply(this,arguments)}c.fetchWellKnownJson=P,c.getSecurityExtensions=w,c.authorize=j,c.isInFrame=p,c.isInPopUp=A,c.onMessage=k,c.ready=y,c.buildTokenRequest=l,c.init=function _(O,F,D){return x.apply(this,arguments)}},9569:(b,c,t)=>{"use strict";var n=t(7156).default;Object.defineProperty(c,"__esModule",{value:!0}),c.default=class o{get(i){return n(function*(){const d=sessionStorage[i];return d?JSON.parse(d):null})()}set(i,d){return n(function*(){return sessionStorage[i]=JSON.stringify(d),d})()}unset(i){return n(function*(){return i in sessionStorage&&(delete sessionStorage[i],!0)})()}}},6340:(b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default={expired:"Session expired! Please re-launch the app",noScopeForId:"Trying to get the ID of the selected %s. Please add 'launch' or 'launch/%s' to the requested scopes and try again.",noIfNoAuth:"You are trying to get %s but the app is not authorized yet.",noFreeContext:"Please don't use open fhir servers if you need to access launch context items like the %S."}},28:function(b){typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global,b.exports=function(){"use strict";var M,c="3.7.5",t=c,n="function"==typeof atob,o="function"==typeof btoa,r="function"==typeof Buffer,i="function"==typeof TextDecoder?new TextDecoder:void 0,d="function"==typeof TextEncoder?new TextEncoder:void 0,P=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),T=(M={},P.forEach(function(z,G){return M[z]=G}),M),I=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,w=String.fromCharCode.bind(String),j="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(h){return new Uint8Array(Array.prototype.slice.call(h,0))},B=function(h){return h.replace(/=/g,"").replace(/[+\/]/g,function(M){return"+"==M?"-":"_"})},R=function(h){return h.replace(/[^A-Za-z0-9\+\/]/g,"")},p=function(h){for(var M,z,G,Q,K="",J=h.length%3,Y=0;Y<h.length;){if((z=h.charCodeAt(Y++))>255||(G=h.charCodeAt(Y++))>255||(Q=h.charCodeAt(Y++))>255)throw new TypeError("invalid character found");K+=P[(M=z<<16|G<<8|Q)>>18&63]+P[M>>12&63]+P[M>>6&63]+P[63&M]}return J?K.slice(0,J-3)+"===".substring(J):K},A=o?function(h){return btoa(h)}:r?function(h){return Buffer.from(h,"binary").toString("base64")}:p,k=r?function(h){return Buffer.from(h).toString("base64")}:function(h){for(var z=[],G=0,Q=h.length;G<Q;G+=4096)z.push(w.apply(null,h.subarray(G,G+4096)));return A(z.join(""))},y=function(h,M){return void 0===M&&(M=!1),M?B(k(h)):k(h)},C=function(h){if(h.length<2)return(M=h.charCodeAt(0))<128?h:M<2048?w(192|M>>>6)+w(128|63&M):w(224|M>>>12&15)+w(128|M>>>6&63)+w(128|63&M);var M=65536+1024*(h.charCodeAt(0)-55296)+(h.charCodeAt(1)-56320);return w(240|M>>>18&7)+w(128|M>>>12&63)+w(128|M>>>6&63)+w(128|63&M)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,S=function(h){return h.replace(l,C)},_=r?function(h){return Buffer.from(h,"utf8").toString("base64")}:d?function(h){return k(d.encode(h))}:function(h){return A(S(h))},x=function(h,M){return void 0===M&&(M=!1),M?B(_(h)):_(h)},O=function(h){return x(h,!0)},F=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,D=function(h){switch(h.length){case 4:var z=((7&h.charCodeAt(0))<<18|(63&h.charCodeAt(1))<<12|(63&h.charCodeAt(2))<<6|63&h.charCodeAt(3))-65536;return w(55296+(z>>>10))+w(56320+(1023&z));case 3:return w((15&h.charCodeAt(0))<<12|(63&h.charCodeAt(1))<<6|63&h.charCodeAt(2));default:return w((31&h.charCodeAt(0))<<6|63&h.charCodeAt(1))}},N=function(h){return h.replace(F,D)},H=function(h){if(h=h.replace(/\s+/g,""),!I.test(h))throw new TypeError("malformed base64.");h+="==".slice(2-(3&h.length));for(var M,G,Q,z="",K=0;K<h.length;)M=T[h.charAt(K++)]<<18|T[h.charAt(K++)]<<12|(G=T[h.charAt(K++)])<<6|(Q=T[h.charAt(K++)]),z+=64===G?w(M>>16&255):64===Q?w(M>>16&255,M>>8&255):w(M>>16&255,M>>8&255,255&M);return z},W=n?function(h){return atob(R(h))}:r?function(h){return Buffer.from(h,"base64").toString("binary")}:H,g=r?function(h){return j(Buffer.from(h,"base64"))}:function(h){return j(W(h).split("").map(function(M){return M.charCodeAt(0)}))},s=function(h){return g(u(h))},a=r?function(h){return Buffer.from(h,"base64").toString("utf8")}:i?function(h){return i.decode(g(h))}:function(h){return N(W(h))},u=function(h){return R(h.replace(/[-_]/g,function(M){return"-"==M?"+":"/"}))},e=function(h){return a(u(h))},v=function(h){return{value:h,enumerable:!1,writable:!0,configurable:!0}},m=function(){var h=function(M,z){return Object.defineProperty(String.prototype,M,v(z))};h("fromBase64",function(){return e(this)}),h("toBase64",function(M){return x(this,M)}),h("toBase64URI",function(){return x(this,!0)}),h("toBase64URL",function(){return x(this,!0)}),h("toUint8Array",function(){return s(this)})},U=function(){var h=function(M,z){return Object.defineProperty(Uint8Array.prototype,M,v(z))};h("toBase64",function(M){return y(this,M)}),h("toBase64URI",function(){return y(this,!0)}),h("toBase64URL",function(){return y(this,!0)})},L={version:c,VERSION:t,atob:W,atobPolyfill:H,btoa:A,btoaPolyfill:p,fromBase64:e,toBase64:x,encode:x,encodeURI:O,encodeURL:O,utob:S,btou:N,decode:e,isValid:function(h){if("string"!=typeof h)return!1;var M=h.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(M)||!/[^\s0-9a-zA-Z\-_]/.test(M)},fromUint8Array:y,toUint8Array:s,extendString:m,extendUint8Array:U,extendBuiltins:function(){m(),U()},Base64:{}};return Object.keys(L).forEach(function(h){return L.Base64[h]=L[h]}),L}()},4366:b=>{var c=1e3,t=60*c,n=60*t,o=24*n;function T(I,w,j,B){var R=w>=1.5*j;return Math.round(I/j)+" "+B+(R?"s":"")}b.exports=function(I,w){w=w||{};var j=typeof I;if("string"===j&&I.length>0)return function d(I){if(!((I=String(I)).length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(I);if(w){var j=parseFloat(w[1]);switch((w[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*j;case"weeks":case"week":case"w":return 6048e5*j;case"days":case"day":case"d":return j*o;case"hours":case"hour":case"hrs":case"hr":case"h":return j*n;case"minutes":case"minute":case"mins":case"min":case"m":return j*t;case"seconds":case"second":case"secs":case"sec":case"s":return j*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return j;default:return}}}}(I);if("number"===j&&isFinite(I))return w.long?function P(I){var w=Math.abs(I);return w>=o?T(I,w,o,"day"):w>=n?T(I,w,n,"hour"):w>=t?T(I,w,t,"minute"):w>=c?T(I,w,c,"second"):I+" ms"}(I):function E(I){var w=Math.abs(I);return w>=o?Math.round(I/o)+"d":w>=n?Math.round(I/n)+"h":w>=t?Math.round(I/t)+"m":w>=c?Math.round(I/c)+"s":I+"ms"}(I);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(I))}},9662:(b,c,t)=>{var n=t(614),o=t(6330),r=TypeError;b.exports=function(i){if(n(i))return i;throw r(o(i)+" is not a function")}},6077:(b,c,t)=>{var n=t(614),o=String,r=TypeError;b.exports=function(i){if("object"==typeof i||n(i))return i;throw r("Can't set "+o(i)+" as a prototype")}},9670:(b,c,t)=>{var n=t(111),o=String,r=TypeError;b.exports=function(i){if(n(i))return i;throw r(o(i)+" is not an object")}},3013:b=>{b.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:(b,c,t)=>{"use strict";var e,f,v,n=t(3013),o=t(9781),r=t(7854),i=t(614),d=t(111),E=t(2597),P=t(648),T=t(6330),I=t(8880),w=t(8052),j=t(7045),B=t(7976),R=t(9518),p=t(7674),A=t(5112),k=t(9711),y=t(9909),C=y.enforce,l=y.get,S=r.Int8Array,_=S&&S.prototype,x=r.Uint8ClampedArray,O=x&&x.prototype,F=S&&R(S),D=_&&R(_),N=Object.prototype,H=r.TypeError,W=A("toStringTag"),g=k("TYPED_ARRAY_TAG"),s="TypedArrayConstructor",a=n&&!!p&&"Opera"!==P(r.opera),u=!1,m={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},L=function(K){var J=R(K);if(d(J)){var Y=l(J);return Y&&E(Y,s)?Y[s]:L(J)}},h=function(K){if(!d(K))return!1;var J=P(K);return E(m,J)||E(U,J)};for(e in m)(v=(f=r[e])&&f.prototype)?C(v)[s]=f:a=!1;for(e in U)(v=(f=r[e])&&f.prototype)&&(C(v)[s]=f);if((!a||!i(F)||F===Function.prototype)&&(F=function(){throw H("Incorrect invocation")},a))for(e in m)r[e]&&p(r[e],F);if((!a||!D||D===N)&&(D=F.prototype,a))for(e in m)r[e]&&p(r[e].prototype,D);if(a&&R(O)!==D&&p(O,D),o&&!E(D,W))for(e in u=!0,j(D,W,{configurable:!0,get:function(){return d(this)?this[g]:void 0}}),m)r[e]&&I(r[e],g,e);b.exports={NATIVE_ARRAY_BUFFER_VIEWS:a,TYPED_ARRAY_TAG:u&&g,aTypedArray:function(K){if(h(K))return K;throw H("Target is not a typed array")},aTypedArrayConstructor:function(K){if(i(K)&&(!p||B(F,K)))return K;throw H(T(K)+" is not a typed array constructor")},exportTypedArrayMethod:function(K,J,Y,q){if(o){if(Y)for(var V in m){var Z=r[V];if(Z&&E(Z.prototype,K))try{delete Z.prototype[K]}catch{try{Z.prototype[K]=J}catch{}}}(!D[K]||Y)&&w(D,K,Y?J:a&&_[K]||J,q)}},exportTypedArrayStaticMethod:function(K,J,Y){var q,V;if(o){if(p){if(Y)for(q in m)if((V=r[q])&&E(V,K))try{delete V[K]}catch{}if(F[K]&&!Y)return;try{return w(F,K,Y?J:a&&F[K]||J)}catch{}}for(q in m)(V=r[q])&&(!V[K]||Y)&&w(V,K,J)}},getTypedArrayConstructor:L,isView:function(J){if(!d(J))return!1;var Y=P(J);return"DataView"===Y||E(m,Y)||E(U,Y)},isTypedArray:h,TypedArray:F,TypedArrayPrototype:D}},4326:(b,c,t)=>{var n=t(1702),o=n({}.toString),r=n("".slice);b.exports=function(i){return r(o(i),8,-1)}},648:(b,c,t)=>{var n=t(1694),o=t(614),r=t(4326),d=t(5112)("toStringTag"),E=Object,P="Arguments"==r(function(){return arguments}());b.exports=n?r:function(I){var w,j,B;return void 0===I?"Undefined":null===I?"Null":"string"==typeof(j=function(I,w){try{return I[w]}catch{}}(w=E(I),d))?j:P?r(w):"Object"==(B=r(w))&&o(w.callee)?"Arguments":B}},9920:(b,c,t)=>{var n=t(7293);b.exports=!n(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},8880:(b,c,t)=>{var n=t(9781),o=t(3070),r=t(9114);b.exports=n?function(i,d,E){return o.f(i,d,r(1,E))}:function(i,d,E){return i[d]=E,i}},9114:b=>{b.exports=function(c,t){return{enumerable:!(1&c),configurable:!(2&c),writable:!(4&c),value:t}}},7045:(b,c,t)=>{var n=t(6339),o=t(3070);b.exports=function(r,i,d){return d.get&&n(d.get,i,{getter:!0}),d.set&&n(d.set,i,{setter:!0}),o.f(r,i,d)}},8052:(b,c,t)=>{var n=t(614),o=t(3070),r=t(6339),i=t(3072);b.exports=function(d,E,P,T){T||(T={});var I=T.enumerable,w=void 0!==T.name?T.name:E;if(n(P)&&r(P,w,T),T.global)I?d[E]=P:i(E,P);else{try{T.unsafe?d[E]&&(I=!0):delete d[E]}catch{}I?d[E]=P:o.f(d,E,{value:P,enumerable:!1,configurable:!T.nonConfigurable,writable:!T.nonWritable})}return d}},3072:(b,c,t)=>{var n=t(7854),o=Object.defineProperty;b.exports=function(r,i){try{o(n,r,{value:i,configurable:!0,writable:!0})}catch{n[r]=i}return i}},9781:(b,c,t)=>{var n=t(7293);b.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},4154:b=>{var c="object"==typeof document&&document.all;b.exports={all:c,IS_HTMLDDA:typeof c>"u"&&void 0!==c}},317:(b,c,t)=>{var n=t(7854),o=t(111),r=n.document,i=o(r)&&o(r.createElement);b.exports=function(d){return i?r.createElement(d):{}}},8113:b=>{b.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},7686:(b,c,t)=>{var P,T,n=t(7854),o=t(8113),r=n.process,i=n.Deno,d=r&&r.versions||i&&i.version,E=d&&d.v8;E&&(T=(P=E.split("."))[0]>0&&P[0]<4?1:+(P[0]+P[1])),!T&&o&&(!(P=o.match(/Edge\/(\d+)/))||P[1]>=74)&&(P=o.match(/Chrome\/(\d+)/))&&(T=+P[1]),b.exports=T},7293:b=>{b.exports=function(c){try{return!!c()}catch{return!0}}},4374:(b,c,t)=>{var n=t(7293);b.exports=!n(function(){var o=function(){}.bind();return"function"!=typeof o||o.hasOwnProperty("prototype")})},6916:(b,c,t)=>{var n=t(4374),o=Function.prototype.call;b.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},6530:(b,c,t)=>{var n=t(9781),o=t(2597),r=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,d=o(r,"name"),E=d&&"something"===function(){}.name,P=d&&(!n||n&&i(r,"name").configurable);b.exports={EXISTS:d,PROPER:E,CONFIGURABLE:P}},5668:(b,c,t)=>{var n=t(1702),o=t(9662);b.exports=function(r,i,d){try{return n(o(Object.getOwnPropertyDescriptor(r,i)[d]))}catch{}}},1702:(b,c,t)=>{var n=t(4374),o=Function.prototype,r=o.call,i=n&&o.bind.bind(r,r);b.exports=n?i:function(d){return function(){return r.apply(d,arguments)}}},5005:(b,c,t)=>{var n=t(7854),o=t(614),r=function(i){return o(i)?i:void 0};b.exports=function(i,d){return arguments.length<2?r(n[i]):n[i]&&n[i][d]}},8173:(b,c,t)=>{var n=t(9662),o=t(8554);b.exports=function(r,i){var d=r[i];return o(d)?void 0:n(d)}},7854:function(b){var c=function(t){return t&&t.Math==Math&&t};b.exports=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof global&&global)||function(){return this}()||this||Function("return this")()},2597:(b,c,t)=>{var n=t(1702),o=t(7908),r=n({}.hasOwnProperty);b.exports=Object.hasOwn||function(d,E){return r(o(d),E)}},3501:b=>{b.exports={}},4664:(b,c,t)=>{var n=t(9781),o=t(7293),r=t(317);b.exports=!n&&!o(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})},2788:(b,c,t)=>{var n=t(1702),o=t(614),r=t(5465),i=n(Function.toString);o(r.inspectSource)||(r.inspectSource=function(d){return i(d)}),b.exports=r.inspectSource},9909:(b,c,t)=>{var B,R,p,n=t(4811),o=t(7854),r=t(111),i=t(8880),d=t(2597),E=t(5465),P=t(6200),T=t(3501),I="Object already initialized",w=o.TypeError;if(n||E.state){var y=E.state||(E.state=new(0,o.WeakMap));y.get=y.get,y.has=y.has,y.set=y.set,B=function(l,S){if(y.has(l))throw w(I);return S.facade=l,y.set(l,S),S},R=function(l){return y.get(l)||{}},p=function(l){return y.has(l)}}else{var C=P("state");T[C]=!0,B=function(l,S){if(d(l,C))throw w(I);return S.facade=l,i(l,C,S),S},R=function(l){return d(l,C)?l[C]:{}},p=function(l){return d(l,C)}}b.exports={set:B,get:R,has:p,enforce:function(l){return p(l)?R(l):B(l,{})},getterFor:function(l){return function(S){var _;if(!r(S)||(_=R(S)).type!==l)throw w("Incompatible receiver, "+l+" required");return _}}}},614:(b,c,t)=>{var n=t(4154),o=n.all;b.exports=n.IS_HTMLDDA?function(r){return"function"==typeof r||r===o}:function(r){return"function"==typeof r}},8554:b=>{b.exports=function(c){return null==c}},111:(b,c,t)=>{var n=t(614),o=t(4154),r=o.all;b.exports=o.IS_HTMLDDA?function(i){return"object"==typeof i?null!==i:n(i)||i===r}:function(i){return"object"==typeof i?null!==i:n(i)}},1913:b=>{b.exports=!1},2190:(b,c,t)=>{var n=t(5005),o=t(614),r=t(7976),i=t(3307),d=Object;b.exports=i?function(E){return"symbol"==typeof E}:function(E){var P=n("Symbol");return o(P)&&r(P.prototype,d(E))}},6244:(b,c,t)=>{var n=t(7466);b.exports=function(o){return n(o.length)}},6339:(b,c,t)=>{var n=t(1702),o=t(7293),r=t(614),i=t(2597),d=t(9781),E=t(6530).CONFIGURABLE,P=t(2788),T=t(9909),I=T.enforce,w=T.get,j=String,B=Object.defineProperty,R=n("".slice),p=n("".replace),A=n([].join),k=d&&!o(function(){return 8!==B(function(){},"length",{value:8}).length}),y=String(String).split("String"),C=b.exports=function(l,S,_){"Symbol("===R(j(S),0,7)&&(S="["+p(j(S),/^Symbol\(([^)]*)\)/,"$1")+"]"),_&&_.getter&&(S="get "+S),_&&_.setter&&(S="set "+S),(!i(l,"name")||E&&l.name!==S)&&(d?B(l,"name",{value:S,configurable:!0}):l.name=S),k&&_&&i(_,"arity")&&l.length!==_.arity&&B(l,"length",{value:_.arity});try{_&&i(_,"constructor")&&_.constructor?d&&B(l,"prototype",{writable:!1}):l.prototype&&(l.prototype=void 0)}catch{}var x=I(l);return i(x,"source")||(x.source=A(y,"string"==typeof S?S:"")),l};Function.prototype.toString=C(function(){return r(this)&&w(this).source||P(this)},"toString")},4758:b=>{var c=Math.ceil,t=Math.floor;b.exports=Math.trunc||function(o){var r=+o;return(r>0?t:c)(r)}},3070:(b,c,t)=>{var n=t(9781),o=t(4664),r=t(1998),i=t(9670),d=t(4948),E=TypeError,P=Object.defineProperty,T=Object.getOwnPropertyDescriptor,I="enumerable",w="configurable",j="writable";c.f=n?r?function(R,p,A){if(i(R),p=d(p),i(A),"function"==typeof R&&"prototype"===p&&"value"in A&&j in A&&!A[j]){var k=T(R,p);k&&k[j]&&(R[p]=A.value,A={configurable:w in A?A[w]:k[w],enumerable:I in A?A[I]:k[I],writable:!1})}return P(R,p,A)}:P:function(R,p,A){if(i(R),p=d(p),i(A),o)try{return P(R,p,A)}catch{}if("get"in A||"set"in A)throw E("Accessors not supported");return"value"in A&&(R[p]=A.value),R}},9518:(b,c,t)=>{var n=t(2597),o=t(614),r=t(7908),i=t(6200),d=t(9920),E=i("IE_PROTO"),P=Object,T=P.prototype;b.exports=d?P.getPrototypeOf:function(I){var w=r(I);if(n(w,E))return w[E];var j=w.constructor;return o(j)&&w instanceof j?j.prototype:w instanceof P?T:null}},7976:(b,c,t)=>{var n=t(1702);b.exports=n({}.isPrototypeOf)},7674:(b,c,t)=>{var n=t(5668),o=t(9670),r=t(6077);b.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var E,i=!1,d={};try{(E=n(Object.prototype,"__proto__","set"))(d,[]),i=d instanceof Array}catch{}return function(T,I){return o(T),r(I),i?E(T,I):T.__proto__=I,T}}():void 0)},2140:(b,c,t)=>{var n=t(6916),o=t(614),r=t(111),i=TypeError;b.exports=function(d,E){var P,T;if("string"===E&&o(P=d.toString)&&!r(T=n(P,d))||o(P=d.valueOf)&&!r(T=n(P,d))||"string"!==E&&o(P=d.toString)&&!r(T=n(P,d)))return T;throw i("Can't convert object to primitive value")}},4488:(b,c,t)=>{var n=t(8554),o=TypeError;b.exports=function(r){if(n(r))throw o("Can't call method on "+r);return r}},6200:(b,c,t)=>{var n=t(2309),o=t(9711),r=n("keys");b.exports=function(i){return r[i]||(r[i]=o(i))}},5465:(b,c,t)=>{var n=t(7854),o=t(3072),r="__core-js_shared__",i=n[r]||o(r,{});b.exports=i},2309:(b,c,t)=>{var n=t(1913),o=t(5465);(b.exports=function(r,i){return o[r]||(o[r]=void 0!==i?i:{})})("versions",[]).push({version:"3.31.0",mode:n?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:(b,c,t)=>{var n=t(7686),o=t(7293),i=t(7854).String;b.exports=!!Object.getOwnPropertySymbols&&!o(function(){var d=Symbol();return!i(d)||!(Object(d)instanceof Symbol)||!Symbol.sham&&n&&n<41})},9303:(b,c,t)=>{var n=t(4758);b.exports=function(o){var r=+o;return r!=r||0===r?0:n(r)}},7466:(b,c,t)=>{var n=t(9303),o=Math.min;b.exports=function(r){return r>0?o(n(r),9007199254740991):0}},7908:(b,c,t)=>{var n=t(4488),o=Object;b.exports=function(r){return o(n(r))}},4590:(b,c,t)=>{var n=t(3002),o=RangeError;b.exports=function(r,i){var d=n(r);if(d%i)throw o("Wrong offset");return d}},3002:(b,c,t)=>{var n=t(9303),o=RangeError;b.exports=function(r){var i=n(r);if(i<0)throw o("The argument can't be less than 0");return i}},7593:(b,c,t)=>{var n=t(6916),o=t(111),r=t(2190),i=t(8173),d=t(2140),E=t(5112),P=TypeError,T=E("toPrimitive");b.exports=function(I,w){if(!o(I)||r(I))return I;var B,j=i(I,T);if(j){if(void 0===w&&(w="default"),B=n(j,I,w),!o(B)||r(B))return B;throw P("Can't convert object to primitive value")}return void 0===w&&(w="number"),d(I,w)}},4948:(b,c,t)=>{var n=t(7593),o=t(2190);b.exports=function(r){var i=n(r,"string");return o(i)?i:i+""}},1694:(b,c,t)=>{var r={};r[t(5112)("toStringTag")]="z",b.exports="[object z]"===String(r)},6330:b=>{var c=String;b.exports=function(t){try{return c(t)}catch{return"Object"}}},9711:(b,c,t)=>{var n=t(1702),o=0,r=Math.random(),i=n(1..toString);b.exports=function(d){return"Symbol("+(void 0===d?"":d)+")_"+i(++o+r,36)}},3307:(b,c,t)=>{var n=t(6293);b.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},1998:(b,c,t)=>{var n=t(9781),o=t(7293);b.exports=n&&o(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},4811:(b,c,t)=>{var n=t(7854),o=t(614),r=n.WeakMap;b.exports=o(r)&&/native code/.test(String(r))},5112:(b,c,t)=>{var n=t(7854),o=t(2309),r=t(2597),i=t(9711),d=t(6293),E=t(3307),P=n.Symbol,T=o("wks"),I=E?P.for||P:P&&P.withoutSetter||i;b.exports=function(w){return r(T,w)||(T[w]=d&&r(P,w)?P[w]:I("Symbol."+w)),T[w]}},3462:(b,c,t)=>{"use strict";var n=t(7854),o=t(6916),r=t(260),i=t(6244),d=t(4590),E=t(7908),P=t(7293),T=n.RangeError,I=n.Int8Array,w=I&&I.prototype,j=w&&w.set,B=r.aTypedArray,R=r.exportTypedArrayMethod,p=!P(function(){var k=new Uint8ClampedArray(2);return o(j,k,{length:1,0:3},1),3!==k[1]}),A=p&&r.NATIVE_ARRAY_BUFFER_VIEWS&&P(function(){var k=new I(2);return k.set(1),k.set("2",1),0!==k[0]||2!==k[1]});R("set",function(y){B(this);var C=d(arguments.length>1?arguments[1]:void 0,1),l=E(y);if(p)return o(j,this,l,C);var S=this.length,_=i(l),x=0;if(_+C>S)throw T("Wrong length");for(;x<_;)this[C+x]=l[x++]},!p||A)},7156:b=>{function c(n,o,r,i,d,E,P){try{var T=n[E](P),I=T.value}catch(w){return void r(w)}T.done?o(I):Promise.resolve(I).then(i,d)}b.exports=function t(n){return function(){var o=this,r=arguments;return new Promise(function(i,d){var E=n.apply(o,r);function P(I){c(E,i,d,P,T,"next",I)}function T(I){c(E,i,d,P,T,"throw",I)}P(void 0)})}},b.exports.__esModule=!0,b.exports.default=b.exports},1572:(b,c,t)=>{"use strict";t.d(c,{Cq:()=>p,Ou:()=>B});var n=t(4650),o=t(3238),r=t(1281),i=t(6895);const d=["determinateSpinner"];function E(A,k){if(1&A&&(n.O4$(),n.TgZ(0,"svg",11),n._UZ(1,"circle",12),n.qZA()),2&A){const y=n.oxw();n.uIk("viewBox",y._viewBox()),n.xp6(1),n.Udp("stroke-dasharray",y._strokeCircumference(),"px")("stroke-dashoffset",y._strokeCircumference()/2,"px")("stroke-width",y._circleStrokeWidth(),"%"),n.uIk("r",y._circleRadius())}}const P=(0,o.pj)(class{constructor(A){this._elementRef=A}},"primary"),T=new n.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function I(){return{diameter:w}}}),w=100;let B=(()=>{class A extends P{constructor(y,C,l){super(y),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=w,this._noopAnimations="NoopAnimations"===C&&!!l&&!l._forceAnimations,l&&(l.color&&(this.color=this.defaultColor=l.color),l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(y){this._value=Math.max(0,Math.min(100,(0,r.su)(y)))}get diameter(){return this._diameter}set diameter(y){this._diameter=(0,r.su)(y)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(y){this._strokeWidth=(0,r.su)(y)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const y=2*this._circleRadius()+this.strokeWidth;return`0 0 ${y} ${y}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return A.\u0275fac=function(y){return new(y||A)(n.Y36(n.SBq),n.Y36(n.QbO,8),n.Y36(T))},A.\u0275cmp=n.Xpm({type:A,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(y,C){if(1&y&&n.Gf(d,5),2&y){let l;n.iGM(l=n.CRH())&&(C._determinateCircle=l.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(y,C){2&y&&(n.uIk("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===C.mode?C.value:null)("mode",C.mode),n.Udp("width",C.diameter,"px")("height",C.diameter,"px"),n.ekj("_mat-animation-noopable",C._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===C.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[n.qOj],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(y,C){if(1&y&&(n.YNc(0,E,2,8,"ng-template",null,0,n.W1O),n.TgZ(2,"div",1,2),n.O4$(),n.TgZ(4,"svg",3),n._UZ(5,"circle",4),n.qZA()(),n.kcU(),n.TgZ(6,"div",5)(7,"div",6)(8,"div",7),n.GkF(9,8),n.qZA(),n.TgZ(10,"div",9),n.GkF(11,8),n.qZA(),n.TgZ(12,"div",10),n.GkF(13,8),n.qZA()()()),2&y){const l=n.MAs(1);n.xp6(4),n.uIk("viewBox",C._viewBox()),n.xp6(1),n.Udp("stroke-dasharray",C._strokeCircumference(),"px")("stroke-dashoffset",C._strokeDashOffset(),"px")("stroke-width",C._circleStrokeWidth(),"%"),n.uIk("r",C._circleRadius()),n.xp6(4),n.Q6J("ngTemplateOutlet",l),n.xp6(2),n.Q6J("ngTemplateOutlet",l),n.xp6(2),n.Q6J("ngTemplateOutlet",l)}},dependencies:[i.tP],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),A})(),p=(()=>{class A{}return A.\u0275fac=function(y){return new(y||A)},A.\u0275mod=n.oAB({type:A}),A.\u0275inj=n.cJS({imports:[i.ez,o.BQ]}),A})()},2718:(b,c,t)=>{"use strict";var r,i;t.d(c,{Z:()=>o}),r=typeof self<"u"?self:void 0,i=function(r){if("function"!=typeof Promise)throw"Promise support required";var i=r.crypto||r.msCrypto;if(i){var d=i.subtle||i.webkitSubtle;if(d){var E=r.Crypto||i.constructor||Object,P=r.SubtleCrypto||d.constructor||Object,I=r.navigator.userAgent.indexOf("Edge/")>-1,w=!!r.msCrypto&&!I,j=!i.subtle&&!!i.webkitSubtle;if(w||j){var x={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},O={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(s){var a=d[s];d[s]=function(u,e,f){var m,U,$,L,v=[].slice.call(arguments);switch(s){case"generateKey":m=k(u),U=e,$=f;break;case"importKey":m=k(f),U=v[3],$=v[4],"jwk"===u&&((e=C(e)).alg||(e.alg=y(m)),e.key_ops||(e.key_ops="oct"!==e.kty?$.filter("d"in e?W:H):$.slice()),v[1]=function l(s){var a=C(s);return w&&(a.extractable=a.ext,delete a.ext),p(unescape(encodeURIComponent(JSON.stringify(a)))).buffer}(e));break;case"unwrapKey":m=v[4],U=v[5],$=v[6],v[2]=f._key}if("generateKey"===s&&"HMAC"===m.name&&m.hash)return m.length=m.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[m.hash.name],d.importKey("raw",i.getRandomValues(new Uint8Array(m.length+7>>3)),m,U,$);if(j&&"generateKey"===s&&"RSASSA-PKCS1-v1_5"===m.name&&(!m.modulusLength||m.modulusLength>=2048))return(u=k(u)).name="RSAES-PKCS1-v1_5",delete u.hash,d.generateKey(u,!0,["encrypt","decrypt"]).then(function(h){return Promise.all([d.exportKey("jwk",h.publicKey),d.exportKey("jwk",h.privateKey)])}).then(function(h){return h[0].alg=h[1].alg=y(m),h[0].key_ops=$.filter(H),h[1].key_ops=$.filter(W),Promise.all([d.importKey("jwk",h[0],m,!0,h[0].key_ops),d.importKey("jwk",h[1],m,U,h[1].key_ops)])}).then(function(h){return{publicKey:h[0],privateKey:h[1]}});if((j||w&&"SHA-1"===(m.hash||{}).name)&&"importKey"===s&&"jwk"===u&&"HMAC"===m.name&&"oct"===e.kty)return d.importKey("raw",p(R(e.k)),f,v[3],v[4]);if(j&&"importKey"===s&&("spki"===u||"pkcs8"===u))return d.importKey("jwk",function S(s){var a=F(s),u=!1;a.length>2&&(u=!0,a.shift());var e={ext:!0};if("1.2.840.113549.1.1.1"!==a[0][0])throw new TypeError("Unsupported key type");var f=["n","e","d","p","q","dp","dq","qi"],v=F(a[1]);u&&v.shift();for(var m=0;m<v.length;m++)v[m][0]||(v[m]=v[m].subarray(1)),e[f[m]]=B(A(v[m]));return e.kty="RSA",e}(e),f,v[3],v[4]);if(w&&"unwrapKey"===s)return d.decrypt(v[3],f,e).then(function(h){return d.importKey(u,h,v[4],v[5],v[6])});try{L=a.apply(d,v)}catch(h){return Promise.reject(h)}return w&&(L=new Promise(function(h,M){L.onabort=L.onerror=function(z){M(z)},L.oncomplete=function(z){h(z.target.result)}})),L=L.then(function(h){return"HMAC"===m.name&&(m.length||(m.length=8*h.algorithm.length)),0==m.name.search("RSA")&&(m.modulusLength||(m.modulusLength=(h.publicKey||h).algorithm.modulusLength),m.publicExponent||(m.publicExponent=(h.publicKey||h).algorithm.publicExponent)),h.publicKey&&h.privateKey?{publicKey:new N(h.publicKey,m,U,$.filter(H)),privateKey:new N(h.privateKey,m,U,$.filter(W))}:new N(h,m,U,$)})}}),["exportKey","wrapKey"].forEach(function(s){var a=d[s];d[s]=function(u,e,f){var m,v=[].slice.call(arguments);switch(s){case"exportKey":v[1]=e._key;break;case"wrapKey":v[1]=e._key,v[2]=f._key}if((j||w&&"SHA-1"===(e.algorithm.hash||{}).name)&&"exportKey"===s&&"jwk"===u&&"HMAC"===e.algorithm.name&&(v[0]="raw"),j&&"exportKey"===s&&("spki"===u||"pkcs8"===u)&&(v[0]="jwk"),w&&"wrapKey"===s)return d.exportKey(u,e).then(function(U){return"jwk"===u&&(U=p(unescape(encodeURIComponent(JSON.stringify(C(U)))))),d.encrypt(v[3],f,U)});try{m=a.apply(d,v)}catch(U){return Promise.reject(U)}return w&&(m=new Promise(function(U,$){m.onabort=m.onerror=function(L){$(L)},m.oncomplete=function(L){U(L.target.result)}})),"exportKey"===s&&"jwk"===u&&(m=m.then(function(U){return(j||w&&"SHA-1"===(e.algorithm.hash||{}).name)&&"HMAC"===e.algorithm.name?{kty:"oct",alg:y(e.algorithm),key_ops:e.usages.slice(),ext:!0,k:B(A(U))}:((U=C(U)).alg||(U.alg=y(e.algorithm)),U.key_ops||(U.key_ops="public"===e.type?e.usages.filter(H):"private"===e.type?e.usages.filter(W):e.usages.slice()),U)})),j&&"exportKey"===s&&("spki"===u||"pkcs8"===u)&&(m=m.then(function(U){return U=function _(s){var u=[["",null]],e=!1;if("RSA"!==s.kty)throw new TypeError("Unsupported key type");for(var f=["n","e","d","p","q","dp","dq","qi"],v=[],m=0;m<f.length&&f[m]in s;m++){var U=v[m]=p(R(s[f[m]]));128&U[0]&&(v[m]=new Uint8Array(U.length+1),v[m].set(U,1))}return v.length>2&&(e=!0,v.unshift(new Uint8Array([0]))),u[0][0]="1.2.840.113549.1.1.1",u.push(new Uint8Array(D(v)).buffer),e?u.unshift(new Uint8Array([0])):u[1]={tag:3,value:u[1]},new Uint8Array(D(u)).buffer}(C(U)),U})),m}}),["encrypt","decrypt","sign","verify"].forEach(function(s){var a=d[s];d[s]=function(u,e,f,v){if(w&&(!f.byteLength||v&&!v.byteLength))throw new Error("Empy input is not allowed");var L,m=[].slice.call(arguments),U=k(u);if(w&&"decrypt"===s&&"AES-GCM"===U.name){var $=u.tagLength>>3;m[2]=(f.buffer||f).slice(0,f.byteLength-$),u.tag=(f.buffer||f).slice(f.byteLength-$)}m[1]=e._key;try{L=a.apply(d,m)}catch(h){return Promise.reject(h)}return w&&(L=new Promise(function(h,M){L.onabort=L.onerror=function(z){M(z)},L.oncomplete=function(G){if(G=G.target.result,"encrypt"===s&&G instanceof AesGcmEncryptResult){var Q=G.ciphertext,K=G.tag;(G=new Uint8Array(Q.byteLength+K.byteLength)).set(new Uint8Array(Q),0),G.set(new Uint8Array(K),Q.byteLength),G=G.buffer}h(G)}})),L}}),w){var g=d.digest;d.digest=function(s,a){if(!a.byteLength)throw new Error("Empy input is not allowed");var u;try{u=g.call(d,s,a)}catch(e){return Promise.reject(e)}return u=new Promise(function(e,f){u.onabort=u.onerror=function(v){f(v)},u.oncomplete=function(v){e(v.target.result)}})},r.crypto=Object.create(i,{getRandomValues:{value:function(s){return i.getRandomValues(s)}},subtle:{value:d}}),r.CryptoKey=N}j&&(i.subtle=d,r.Crypto=E,r.SubtleCrypto=P,r.CryptoKey=N)}}}function B(s){return btoa(s).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function R(s){return s=(s+="===").slice(0,-s.length%4),atob(s.replace(/-/g,"+").replace(/_/g,"/"))}function p(s){for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}function A(s){return s instanceof ArrayBuffer&&(s=new Uint8Array(s)),String.fromCharCode.apply(String,s)}function k(s){var a={name:(s.name||s||"").toUpperCase().replace("V","v")};switch(a.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":s.length&&(a.length=s.length);break;case"HMAC":s.hash&&(a.hash=k(s.hash)),s.length&&(a.length=s.length);break;case"RSAES-PKCS1-v1_5":s.publicExponent&&(a.publicExponent=new Uint8Array(s.publicExponent)),s.modulusLength&&(a.modulusLength=s.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":s.hash&&(a.hash=k(s.hash)),s.publicExponent&&(a.publicExponent=new Uint8Array(s.publicExponent)),s.modulusLength&&(a.modulusLength=s.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return a}function y(s){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[s.name][(s.hash||{}).name||s.length||""]}function C(s){(s instanceof ArrayBuffer||s instanceof Uint8Array)&&(s=JSON.parse(decodeURIComponent(escape(A(s)))));var a={kty:s.kty,alg:s.alg,ext:s.ext||s.extractable};switch(a.kty){case"oct":a.k=s.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(u){u in s&&(a[u]=s[u])});break;default:throw new TypeError("Unsupported key type")}return a}function F(s,a){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),a||(a={pos:0,end:s.length}),a.end-a.pos<2||a.end>s.length)throw new RangeError("Malformed DER");var v,u=s[a.pos++],e=s[a.pos++];if(e>=128){if(a.end-a.pos<(e&=127))throw new RangeError("Malformed DER");for(var f=0;e--;)f<<=8,f|=s[a.pos++];e=f}if(a.end-a.pos<e)throw new RangeError("Malformed DER");switch(u){case 2:v=s.subarray(a.pos,a.pos+=e);break;case 3:if(s[a.pos++])throw new Error("Unsupported bit string");e--;case 4:v=new Uint8Array(s.subarray(a.pos,a.pos+=e)).buffer;break;case 5:v=null;break;case 6:var m=btoa(A(s.subarray(a.pos,a.pos+=e)));if(!(m in x))throw new Error("Unsupported OBJECT ID "+m);v=x[m];break;case 48:v=[];for(var U=a.pos+e;a.pos<U;)v.push(F(s,a));break;default:throw new Error("Unsupported DER tag 0x"+u.toString(16))}return v}function D(s,a){a||(a=[]);var u=0,e=0,f=a.length+2;if(a.push(0,0),s instanceof Uint8Array){u=2,e=s.length;for(var v=0;v<e;v++)a.push(s[v])}else if(s instanceof ArrayBuffer)for(u=4,e=s.byteLength,s=new Uint8Array(s),v=0;v<e;v++)a.push(s[v]);else if(null===s)u=5,e=0;else if("string"==typeof s&&s in O){var m=p(atob(O[s]));for(u=6,e=m.length,v=0;v<e;v++)a.push(m[v])}else if(s instanceof Array){for(v=0;v<s.length;v++)D(s[v],a);u=48,e=a.length-f}else{if(!("object"==typeof s&&3===s.tag&&s.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+s);for(u=3,e=(s=new Uint8Array(s.value)).byteLength,a.push(0),v=0;v<e;v++)a.push(s[v]);e++}if(e>=128){var U=e;for(e=4,a.splice(f,0,U>>24&255,U>>16&255,U>>8&255,255&U);e>1&&!(U>>24);)U<<=8,e--;e<4&&a.splice(f,4-e),e|=128}return a.splice(f-2,2,u,e),a}function N(s,a,u,e){Object.defineProperties(this,{_key:{value:s},type:{value:s.type,enumerable:!0},extractable:{value:void 0===u?s.extractable:u,enumerable:!0},algorithm:{value:void 0===a?s.algorithm:a,enumerable:!0},usages:{value:void 0===e?s.usages:e,enumerable:!0}})}function H(s){return"verify"===s||"encrypt"===s||"wrapKey"===s}function W(s){return"sign"===s||"decrypt"===s||"unwrapKey"===s}},"function"==typeof define&&define.amd?define([],function(){return i(r)}):"object"==typeof module&&module.exports?module.exports=i(r):i(r);const o=window.crypto},5861:(b,c,t)=>{"use strict";function n(r,i,d,E,P,T,I){try{var w=r[T](I),j=w.value}catch(B){return void d(B)}w.done?i(j):Promise.resolve(j).then(E,P)}function o(r){return function(){var i=this,d=arguments;return new Promise(function(E,P){var T=r.apply(i,d);function I(j){n(T,E,P,I,w,"next",j)}function w(j){n(T,E,P,I,w,"throw",j)}I(void 0)})}}t.d(c,{Z:()=>o})}}]);